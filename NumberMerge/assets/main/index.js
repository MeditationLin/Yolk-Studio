System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResMgr.ts","./SaveData.ts"],(function(o){var n,t,i,u,e,s,a,c,l,r;return{setters:[function(o){n=o.inheritsLoose,t=o.createClass},function(o){i=o.cclegacy,u=o._decorator,e=o.AudioSource,s=o.sys,a=o.AudioClip,c=o.Component},function(o){l=o.default},function(o){r=o.SaveData}],execute:function(){var d,h;i._RF.push({},"e4286FZhgRNhIkSvsRoocsX","AudioMgr",void 0);var f=u.ccclass,p=(u.property,window.wx);o("AudioMgr",f("AudioMgr")(((h=function(o){function i(){for(var n,t=arguments.length,i=new Array(t),u=0;u<t;u++)i[u]=arguments[u];return(n=o.call.apply(o,[this].concat(i))||this)._audioSource=null,n._sound=null,n}n(i,o),i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance};var u=i.prototype;return u.onLoad=function(){null===i.instance?i.instance=this:this.destroy()},u.init=function(){console.log("AudioMgr Init..."),this._audioSource=this.node.addComponent(e),this._sound=Boolean("false"!=r.OnLoadData("","Sounds"))},i.playMusic=function(o){},u.VibrateShort=function(o,n,t,i){void 0===n&&(n=null),void 0===t&&(t=null),void 0===i&&(i=null),s.platform==s.Platform.WECHAT_GAME&&p.vibrateShort({type:o,success:n,fail:t,complete:i})},u.VibrateLong=function(o,n,t){void 0===o&&(o=null),void 0===n&&(n=null),void 0===t&&(t=null),s.platform==s.Platform.WECHAT_GAME&&p.vibrateLong({success:o,fail:n,complete:t})},u.PlayOneShot=function(o,n){if(void 0===n&&(n=1),this.sound)if(o instanceof a)this._audioSource.playOneShot(o,n);else{var t=l.getInstance().getAsset("Sounds",o);this._audioSource.playOneShot(t,n)}},u.Play=function(o,n){void 0===n&&(n=1),o instanceof a&&(this._audioSource.clip=o,this._audioSource.loop=!0,this.audioSource.volume=n,console.log("this.sound = ",this.sound),this.sound&&this._audioSource.play())},u.Pause=function(){this._audioSource.pause()},u.Resume=function(){this._sound&&this._audioSource.play()},i.playSound=function(o){},t(i,[{key:"audioSource",get:function(){return this._audioSource}},{key:"sound",get:function(){return this._sound},set:function(o){this._sound=o,this._sound?(console.log("this._audioSource.play();"),this._audioSource.play()):(console.log("this._audioSource.pause();"),this._audioSource.pause())}}]),i}(c)).instance=null,d=h))||d);i._RF.pop()}}}));

System.register("chunks:///_virtual/BaseSDK.ts",["cc","./EventMgr.ts"],(function(n){var o,t,e;return{setters:[function(n){o=n.cclegacy,t=n._decorator},function(n){e=n.EventMgr}],execute:function(){o._RF.push({},"f2639OOWNdPdJAc6q/DlhIo","BaseSDK",void 0);t.ccclass,t.property,n("default",function(){function n(){}var o=n.prototype;return o.init=function(n,o){console.log("Basesdk init")},o.login=function(n,o){console.log("Basesdk login")},o.logout=function(){console.log("Basesdk logout")},o.exit=function(){console.log("Basesdk exit")},o.switchLogin=function(){},o.report=function(){},o.pay=function(){},o.createRewardAd=function(){},o.playRewardAd=function(n,o){e.getInstance().emit("onAddOneProp")},o.showBannerAd=function(n){},o.showInterstitialAd=function(){},o.showCustomAd=function(n,o,t){},n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/BlockMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResMgr.ts"],(function(n){var t,o,e,r,i,l,c,a;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy,e=n._decorator,r=n.Sprite,i=n.Color,l=n.instantiate,c=n.Component},function(n){a=n.default}],execute:function(){var s;o._RF.push({},"0956fYHvhJDUYHK6vhFIcE8","BlockMgr",void 0);var h=e.ccclass,f=(e.property,["#00BFFF","#00FA9A","#8470FF","#FFA07A","#FFBBFF","#BBFFFF","#FFD700","#F08080","#ff99cc","#009999","#ccccff","#ffff66"]);n("BlockMgr",h("BlockMgr")(s=function(n){function o(){for(var t,o=arguments.length,e=new Array(o),r=0;r<o;r++)e[r]=arguments[r];return(t=n.call.apply(n,[this].concat(e))||this).BlockArray=null,t.blockSize=0,t}t(o,n);var e=o.prototype;return e.Init=function(n){this.BlockArray=new Array,this.blockSize=n+10},e.ResetAndClearAllBlock=function(n){this.blockSize=n+10;for(var t=this.BlockArray.length,o=0;o<t;++o)this.BlockArray[o].obj.parent=null,console.log("Remove Block ...",o);this.BlockArray=new Array},e.OutPutBlock=function(){console.log("BlockSize = ",this.BlockArray.length);for(var n=0;n<this.BlockArray.length;++n);},e.Delete=function(n,t){var o=this._findBlockInfoByIndex(n);null!=o&&(o.isDeath=!0,o.obj.active=!1)},o.SetBlockOpacity=function(n,t){var o=n.getChildByName("bg"),e=(o.getComponent(r).color.toString(),o.getComponent(r).color);o.getComponent(r).color=new i(e.r,e.g,e.b,t?255:150)},e.FindOrCreateBlockInfoByIndex=function(n,t){var o=this._findBlockInfoByIndex(n);if(null!=o)return{obj:o,isNew:!1}},e.ResetFontBlockInfo=function(){},e.FindOrCreateObjByIndex=function(n,t){var o=this._findBlockInfoByIndex(n);if(null!=o)return this.ResetBlockSize(o.obj,n,t),o.startIndex=n,o.endIndex=t,{obj:o.obj,isNew:!1};if(null!=(o=this._findDeathBlockInfo(n)))return o.obj.active=!0,o.isDeath=!1,o.startIndex=n,o.endIndex=t,this.ResetBlockSize(o.obj,n,t,!0),{obj:o.obj,isNew:!1};var e=this._newOneBlockInfo(n,t);return this.ResetBlockSize(e.obj,n,t,!0),{obj:e.obj,isNew:!0}},e._resetBlockColor=function(n){var t=f.length,o=Math.floor(Math.random()*t),e=f[o];n.getChildByName("bg").getComponent(r).color=new i(e+"7F")},e._findDeathBlockInfo=function(n){for(var t=this.BlockArray.length,o=0;o<t;o++)if(this.BlockArray[o].isDeath)return this.BlockArray[o];return null},e._findObjByIndex=function(n,t){var o=this._findBlockInfoByIndex(n);return null!=o?o.obj:null},e._findBlockInfoByIndex=function(n,t){void 0===t&&(t=!1);for(var o=this.BlockArray.length,e=0;e<o;e++)if(this._CompareIndexIsInTwoIndex(n,this.BlockArray[e].startIndex,this.BlockArray[e].endIndex)&&(t||!this.BlockArray[e].isDeath))return this.BlockArray[e];return null},e._CompareIndexIsInTwoIndex=function(n,t,o){return n.x>=t.x&&n.x<=o.x&&n.y>=t.y&&n.y<=o.y},e.ResetBlockSize=function(n,t,o,e){void 0===e&&(e=!1);var r=n.getChildByName("bg");r.width=this.blockSize*(Math.abs(t.x-o.x)+1)-10,r.height=this.blockSize*(Math.abs(t.y-o.y)+1)-10,n.width=r.width,n.height=r.height,e&&this._resetBlockColor(n)},e._newOneBlockInfo=function(n,t){var o=a.getInstance().getAsset("GUI","Prefabs/FrontBlock"),e={obj:l(o),startIndex:n,endIndex:t,isDeath:!1};return this.BlockArray.push(e),e},o}(c))||s);o._RF.pop()}}}));

System.register("chunks:///_virtual/Calculator.ts",["cc"],(function(r){var t,a;return{setters:[function(r){t=r.cclegacy,a=r._decorator}],execute:function(){var n;t._RF.push({},"0927fhZKGNIG7KLFxNqsxfv","Calculator",void 0);var o=a.ccclass;a.property,r("Calculator",o("Calculator")(n=function(){function r(){}return r.RandomIndexByWeights=function(r){var t,a,n,o=0;if(r.forEach((function(r){o+=r})),o<=0)return t=void 0,console.warn("权重之和小于0"),t;for(var c=(n=o-(a=1),a+Math.floor(Math.random()*n)),e=0;e<r.length;e++){var u=r[e];if(c<=u){t=e;break}c-=u}return t},r}())||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonGameOverPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./AudioMgr.ts","./UIStaticComp.ts","./SaveData.ts","./LocalizationMgr.ts"],(function(n){var e,t,o,a,i,c,s,r,u,l,d;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,a=n.Label,i=n.Button,c=n.Component},function(n){s=n.EventMgr},function(n){r=n.AudioMgr},function(n){u=n.UIStaticComp},function(n){l=n.SaveData},function(n){d=n.LocalizationMgr}],execute:function(){var h;t._RF.push({},"9f577wi4plI25wqNCij0NCU","CommonGameOverPanel",void 0);var m=o.ccclass;o.property,n("CommonGameOverPanel",m("CommonGameOverPanel")(h=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))||this).game_obj=null,e.soundBtn=null,e}e(t,n);var o=t.prototype;return o.Init=function(n){this.game_obj=n,u.findObjByPath(this.game_obj,"GameOverLabel").getComponent(a).string=d.getInstance().getLocalizedstring("closingRemark");var e=this.node.getChildByName("RestartButton");this.soundBtn=this.node.getChildByName("SoundButton"),this.updateSound(),e.on(i.EventType.CLICK,this.onClickRestart,this),this.soundBtn.on(i.EventType.CLICK,this.onClickSound,this),this._updateBestScore(),this._onShowBannerAd(!0)},o.onDestroy=function(){console.log("onDestroyCommonGameOverPanel ... ")},o.onActive=function(){this.game_obj.active=!0,this.updateSound(),this._updateBestScore(),this._onShowBannerAd(!0)},o._onShowBannerAd=function(n){},o.onClickMainMenu=function(){console.log("onClickMainMenu"),r.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),s.getInstance().emit("onEndGame")},o.onClickRestart=function(){console.log("onClickRestart"),r.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),s.getInstance().emit("onRestartGame"),this._onShowBannerAd(!1)},o._updateBestScore=function(){u.findObjByPath(this.game_obj,"CurScoreNode/Score").getComponent(a).string=l.OnLoadData("GameInOnePiece","cur_score")+"",u.findObjByPath(this.game_obj,"BestScoreNode/Score").getComponent(a).string=l.OnLoadData("GameInOnePiece","best_score")+""},o.onClickSound=function(){var n=Boolean("false"!=l.OnLoadData("","Sounds"));r.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),l.OnSaveData("","Sounds",!n),this.updateSound()},o.updateSound=function(){var n=Boolean("false"!=l.OnLoadData("","Sounds")),e=this.soundBtn.getChildByName("open"),t=this.soundBtn.getChildByName("close");e.active=n,t.active=!e.active,r.getInstance().sound=n},t}(c))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonGamePausePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./AudioMgr.ts","./UIStaticComp.ts","./SaveData.ts"],(function(n){var e,t,o,i,a,s,c,u,l,r;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,i=n.Button,a=n.Label,s=n.Component},function(n){c=n.EventMgr},function(n){u=n.AudioMgr},function(n){l=n.UIStaticComp},function(n){r=n.SaveData}],execute:function(){var d;t._RF.push({},"59f80w9RzJLn4YW2gQMGPo0","CommonGamePausePanel",void 0);var h=o.ccclass;o.property,n("CommonGamePausePanel",h("CommonGamePausePanel")(d=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))||this).game_obj=null,e.returnBtn=null,e.soundBtn=null,e}e(t,n);var o=t.prototype;return o.Init=function(n){this.game_obj=n;var e=this.node.getChildByName("ReturnButton"),t=this.node.getChildByName("MainMenuButton"),o=this.node.getChildByName("GuideButton"),a=this.node.getChildByName("RestartButton");this.soundBtn=this.node.getChildByName("SoundButton"),this.updateSound(),e.on(i.EventType.CLICK,this.onClickReturn,this),t.on(i.EventType.CLICK,this.onClickMainMenu,this),o.on(i.EventType.CLICK,this.onClickGuide,this),a.on(i.EventType.CLICK,this.onClickRestart,this),this.soundBtn.on(i.EventType.CLICK,this.onClickSound,this),this._updateBestScore(),this._onShowBannerAd(!0)},o.onDestroy=function(){console.log("onDestroyCommonGamePausePanel ... "),this._onShowBannerAd(!1)},o.onShowPanel=function(){this.game_obj.active=!0,this._updateBestScore(),this._onShowBannerAd(!0)},o._onShowBannerAd=function(n){},o.onClickReturn=function(){console.log("onClickReturn"),u.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),this.node.active=!1,this._onShowBannerAd(!1)},o.onClickMainMenu=function(){console.log("onClickMainMenu"),u.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),c.getInstance().emit("onEndGame")},o.onClickGuide=function(){console.log("onClickGuide")},o.onClickRestart=function(){console.log("onClickRestart"),u.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),c.getInstance().emit("onRestartGame"),this._onShowBannerAd(!1)},o.onClickSound=function(){var n=Boolean("false"!=r.OnLoadData("","Sounds"));u.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),r.OnSaveData("","Sounds",!n),this.updateSound()},o.updateSound=function(){var n=Boolean("false"!=r.OnLoadData("","Sounds")),e=this.soundBtn.getChildByName("open"),t=this.soundBtn.getChildByName("close");e.active=n,t.active=!e.active,u.getInstance().sound=n},o._updateBestScore=function(){l.findObjByPath(this.game_obj,"Score/Label").getComponent(a).string=Number(r.OnLoadData("GameInOnePiece","best_score"))+""},t}(s))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonGameRewardPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./AudioMgr.ts","./UIStaticComp.ts","./SDKMgr.ts","./ResMgr.ts","./GameInOnePiecePanel.ts","./LocalizationMgr.ts"],(function(n){var e,t,o,i,a,c,r,s,l,g,d,m,h,u,p;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,i=n.Label,a=n.Button,c=n.Sprite,r=n.RichText,s=n.Component},function(n){l=n.EventMgr},function(n){g=n.AudioMgr},function(n){d=n.UIStaticComp},function(n){m=n.SDKMgr},function(n){h=n.default},function(n){u=n.PropInfo},function(n){p=n.LocalizationMgr}],execute:function(){var f;t._RF.push({},"087c0ZGqd1ChrJo6YShnRU6","CommonGameRewardPanel",void 0);var _=o.ccclass;o.property,n("CommonGameRewardPanel",_("CommonGameRewardPanel")(f=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(e=n.call.apply(n,[this].concat(o))||this).game_obj=null,e.rewardBtn=null,e.m_prop_index=-1,e}e(t,n);var o=t.prototype;return o.Init=function(n,e){this.game_obj=n,this.m_prop_index=e;var t=this.node.getChildByName("freeButton"),o=this.node.getChildByName("close");d.findObjByPath(t,"Label").getComponent(i).string=p.getInstance().getLocalizedstring("reward_get"),t.on(a.EventType.CLICK,this.onClickReward,this),o.on(a.EventType.CLICK,this.onClickClose,this),this._updateIcon(e),this._onShowBannerAd(!0)},o.onDestroy=function(){console.log("onDestroyCommonGameRewardPanel ... ")},o._updateIcon=function(n){var e=d.findObjByPath(this.game_obj,"RewardIcon"),t=h.getInstance().getAsset("Sprite",u[n].asset);e.getComponent(c).spriteFrame=t,d.findObjByPath(this.game_obj,"tip/tip1").getComponent(r).string=p.getInstance().getLocalizedstring("reward_"+u[n].key_name),d.findObjByPath(this.game_obj,"tip/tip4").getComponent(i).string=p.getInstance().getLocalizedstring("reward_watchvideo")},o.onShowPanel=function(){this.game_obj.removeFromParent()},o._onShowBannerAd=function(n){},o.onClickReward=function(){console.log("onClickReward"),g.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),this.node.active=!1,l.getInstance().emit("onClickPropIndex",[this.m_prop_index]),this._onShowBannerAd(!1),m.getInstance().showRewardAd()},o.onClickClose=function(){g.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),this.game_obj.removeFromParent(),this._onShowBannerAd(!1)},o.onClickMainMenu=function(){console.log("onClickMainMenu"),g.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),l.getInstance().emit("onEndGame")},t}(s))||f);t._RF.pop()}}}));

System.register("chunks:///_virtual/CommonGameTeachingPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./AudioMgr.ts","./UIStaticComp.ts","./SaveData.ts","./LocalizationMgr.ts"],(function(n){var t,e,o,i,a,c,r,s,g,l,u;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,i=n.Button,a=n.Label,c=n.Component},function(n){r=n.EventMgr},function(n){s=n.AudioMgr},function(n){g=n.UIStaticComp},function(n){l=n.SaveData},function(n){u=n.LocalizationMgr}],execute:function(){var m;e._RF.push({},"087f7lPUWBFaJKODkLlG1YP","CommonGameTeachingPanel",void 0);var h=o.ccclass;o.property,n("CommonGameTeachingPanel",h("CommonGameTeachingPanel")(m=function(n){function e(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this).game_obj=null,t.returnBtn=null,t.soundBtn=null,t}t(e,n);var o=e.prototype;return o.Init=function(n){this.game_obj=n,this._initLanguage(),this.game_obj.getChildByName("TryButton").on(i.EventType.CLICK,this.onClickTry,this)},o._initLanguage=function(){var n=g.findObjByPath(this.game_obj,"tip1"),t=g.findObjByPath(this.game_obj,"tip2"),e=g.findObjByPath(this.game_obj,"TryButton/Label");n.getComponent(a).string=u.getInstance().getLocalizedstring("teach_tip_1"),t.getComponent(a).string=u.getInstance().getLocalizedstring("teach_tip_2"),e.getComponent(a).string=u.getInstance().getLocalizedstring("btn_try")},o.onShowPanel=function(){this.game_obj.active=!0},o.onClickTry=function(){console.log("onClickReturn"),s.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),this.game_obj.removeFromParent(),l.OnSaveData("GameInOnePiece","finish_guide",!0),r.getInstance().emit("onFinishGuide")},o.onClickMainMenu=function(){console.log("onClickMainMenu"),s.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),r.getInstance().emit("onEndGame")},e}(c))||m);e._RF.pop()}}}));

System.register("chunks:///_virtual/ConfigData.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var i;t._RF.push({},"f80dfLtdRRHPKPB5DHqocQ9","ConfigData",void 0);var a=e("PLATFORM_TAG",function(e){return e[e.BASEGAME=0]="BASEGAME",e[e.WECHAT=1]="WECHAT",e[e.GAME_DISTRIBUTION=2]="GAME_DISTRIBUTION",e[e.Y8=3]="Y8",e}({}));e("gConfigData",{LANGUAGE:"en",PLATFORM:a.BASEGAME,Game2248:{MapSize:{width:5,height:7},BlockSize:{width:200,height:200},Touch_Circle_Radius:85,move_times:.15,fall_times:.1},GameInOnePiece:{MapSize:{width:5,height:6},BlockSize:{width:196,height:196},move_times:.1,fall_times:.1,become_gray_delay_times:.15,shuffle_times:1.3,magnet_min_times:.3,magnet_max_times:.5,max_diffence_count:8,create_weight_array:[0,1,2,4,8,12,16,20],max_save_undo_count:5},GameClickMeAddOne:{MapSize:{width:5,height:7},BlockSize:{width:196,height:196},move_times:.1,fall_times:.1},GameMergeDice:{MapSize:{width:5,height:5},BlockSize:{width:190,height:190},GridBGColor:["#D3D3D3","#9C9999"],CurrentBlockSize:{width:2,height:2},CurrentBlockTouchRadius:500,CurrentBlockDelta:{x:0,y:230},merge_delay_times:.1,merge_times:.2,fall_times:.1,current_block_return_times:.1,current_block_rotate_times:.08,Become_Bomb_Number:256},cStarInfo:(i={},i[5]={FaildTimes:[1,3,5],GetExp:[5,4,3]},i[10]={FaildTimes:[3,6,8],GetExp:[5,4,3]},i[15]={FaildTimes:[4,7,10],GetExp:[10,8,6]},i)});t._RF.pop()}}}));

System.register("chunks:///_virtual/DataMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts"],(function(e){var n,t,a,c,i;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,a=e._decorator,c=e.Component},function(e){i=e.EventMgr}],execute:function(){var o,r;t._RF.push({},"80569FigzdJaKcQvedmJkNC","DataMgr",void 0);var s=a.ccclass;a.property,e("DataMgr",s("DataMgr")(((r=function(e){function t(){for(var n,t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];return(n=e.call.apply(e,[this].concat(a))||this).m_GameInOnePieceData={score:0},n}n(t,e),t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance};var a=t.prototype;return a.init=function(){console.log("DataMgr Init..."),this._initData(),this._resistListenEvents()},a._initData=function(){this.m_GameInOnePieceData.score=0},a._resistListenEvents=function(){i.getInstance().on("onUpdateGameInOnePieceScore",this._onUpdateGameInOnePieceScore,this)},a._onUpdateGameInOnePieceScore=function(e){this.m_GameInOnePieceData.score+=e,console.log("_onUpdateGameInOnePieceScore = ",this.m_GameInOnePieceData.score)},t}(c)).instance=null,o=r))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/EventMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,i,r;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,r=n.Component}],execute:function(){var o,s;e._RF.push({},"552eby3a0ZEWa+ydZ7hfsiV","EventMgr",void 0);var c=i.ccclass,a=(i.property,function(){this.name=null,this.cb=null,this.obj=null});n("EventMgr",c("EventMgr")(((s=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return(t=n.call.apply(n,[this].concat(i))||this).eventList=null,t}t(e,n),e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance};var i=e.prototype;return i.onLoad=function(){null===e.instance?e.instance=this:this.destroy()},i.init=function(){this.eventList=new Map,console.log("EventMgr Init...")},i.on=function(n,t,e){console.log(n);var i=this.eventList.get(n);if(i)for(var r=0;r<i.length;++r){var o=i[r];if(o.cb===t&&o.obj===e)return}else i=new Array;var s=new a;s.name=n,s.cb=t,s.obj=e,i.push(s),this.eventList.set(n,i)},i.off=function(n,t,e){var i=this.eventList.get(n);if(i)for(var r=i.length-1;r>=0;--r){var o=i[r];o.cb===t&&o.obj===e&&i.splice(r,1)}},i.emit=function(n,t){var e=this.eventList.get(n);if(e)for(var i=e.length-1;i>=0;--i){var r=e[i];r.cb&&r.obj&&r.cb.apply(r.obj,t)}},e}(r)).instance=null,o=s))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/Game2248.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameBase.ts","./ResMgr.ts","./Game2248Panel.ts","./EventMgr.ts","./Game2248Logic.ts","./CommonGamePausePanel.ts","./CommonGameRewardPanel.ts"],(function(e){var a,n,t,s,o,m,i,l,r,u,P,c;return{setters:[function(e){a=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,s=e.instantiate,o=e.Prefab},function(e){m=e.GameBase},function(e){i=e.default},function(e){l=e.Game2248Panel},function(e){r=e.EventMgr},function(e){u=e.Game2248Logic},function(e){P=e.CommonGamePausePanel},function(e){c=e.CommonGameRewardPanel}],execute:function(){var h;n._RF.push({},"939b6AsdUZDxYQSV1nXOGTG","Game2248",void 0);var G=t.ccclass;t.property,e("Game2248",G("Game2248")(h=function(e){function n(){for(var a,n=arguments.length,t=new Array(n),s=0;s<n;s++)t[s]=arguments[s];return(a=e.call.apply(e,[this].concat(t))||this).resPkg={GUI:{assetType:o,urls:["Prefabs/Common/CommonGamePausePanel","Prefabs/Game2248/Game2248Panel"]}},a.m_gamePanel=null,a.m_pausePanel=null,a.logic=null,a}a(n,e);var t=n.prototype;return t.Init=function(a){e.prototype.Init.call(this,a)},t._resigistEvent=function(){r.getInstance().on("onPauseGame",this._onCreatePausePanel,this),r.getInstance().on("onRestartGame",this._onRestartGame,this)},t._unResigistEvent=function(){r.getInstance().off("onPauseGame",this._onCreatePausePanel,this),r.getInstance().off("onRestartGame",this._onRestartGame,this)},t.EnterGame=function(){console.log("GameBase Game2248..."),this.logic=new u,this._CreateGamePanel()},t._CreateGamePanel=function(){var e=i.getInstance().getAsset("GUI","Prefabs/Game2248/Game2248Panel");this.m_gamePanel=s(e),this.m_gamePanel.addComponent(l).Init(this.m_gamePanel,this.logic),this.game_obj.addChild(this.m_gamePanel)},t._onCreatePausePanel=function(){if(null==this.m_pausePanel){var e=i.getInstance().getAsset("GUI","Prefabs/Common/CommonGamePausePanel");this.m_pausePanel=s(e),this.m_pausePanel.addComponent(P).Init(this.m_pausePanel),this.game_obj.addChild(this.m_pausePanel)}else this.m_pausePanel.active=!0},t._onCreateRewardPanel=function(){var e=i.getInstance().getAsset("GUI","Prefabs/Common/CommonGameRewardPanel"),a=s(e);a.addComponent(c).Init(a),this.game_obj.addChild(a)},t._onRestartGame=function(){this.m_pausePanel.active=!1,this.logic.RestartGame(),this.m_gamePanel.getComponent(l).OnRestartGame()},t.OnEndGame=function(){e.prototype.OnEndGame.call(this),this.m_pausePanel.getComponent(P).onDestroy(),this.m_gamePanel.getComponent(l).onDestroy(),this.m_pausePanel.removeFromParent(),this.m_gamePanel.removeFromParent(),this.m_pausePanel=null,this.m_gamePanel=null},n}(m))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/Game2248Logic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigData.ts"],(function(t){var e,r,a,i;return{setters:[function(t){e=t.createClass},function(t){r=t.cclegacy,a=t._decorator},function(t){i=t.gConfigData}],execute:function(){r._RF.push({},"58d658tCiVJe75ZPIawFr+k","Game2248Logic",void 0);a.ccclass,a.property,t("Game2248Logic",function(){function t(){this.mapWidth=0,this.mapHeight=0,this.mapArray=null,this.m_selectMapList=null,this.m_totalNum=null,this.mapWidth=i.Game2248.MapSize.width,this.mapHeight=i.Game2248.MapSize.height,this.m_totalNum=0,this.mapArray=new Array;for(var t=0;t<this.mapHeight;t++){for(var e=new Array,r=0;r<this.mapWidth;r++){var a={cur_index:{x:r,y:t},last_index:{x:r,y:t},number:this.getCreateNumber(),isSelect:!1};e.push(a)}this.mapArray.push(e)}this.m_selectMapList=new Array}var r=t.prototype;return r.RestartGame=function(){for(var t=0;t<this.mapHeight;t++)for(var e=0;e<this.mapWidth;e++)this.mapArray[t][e].number=this.getCreateNumber(),this.mapArray[t][e].isSelect=!1},r.getCreateNumber=function(){var t=Math.log2(16);t=Math.max(1,t);var e=Math.floor(Math.random()*t)+1;return Math.pow(2,e)},r.GetGridInfoByIndex=function(t){return console.assert(this.mapArray[t.y][t.x]),this.mapArray[t.y][t.x].number},r.onTouchOneGrid=function(t){var e=this.m_selectMapList.length,r=!1,a=new Array;if(0==e)return r=!0,this.m_selectMapList.push(t),this.m_totalNum=this.mapArray[t.y][t.x].number,{canTouch:!0,cancelList:a,selectList:this.m_selectMapList};if(this._compareTwoIndexEqual(t,this.m_selectMapList[e-1]))return{canTouch:!1,cancelList:a,selectList:this.m_selectMapList};var i=this._checkIsInList(t,this.m_selectMapList);if(-1==i){var s=this.m_selectMapList[e-1],n=this._compareTwoIndexIsBorder(t,s),h=this._checkGridNumCanAddToList(this.mapArray[t.y][t.x].number,this.mapArray[s.y][s.x].number);console.log("isCanAdd = ",h),n&&h&&(r=!0,this.m_totalNum+=this.mapArray[t.y][t.x].number,this.m_selectMapList.push(t))}for(var m=0;m<i;++m){var o=this.m_selectMapList.pop();this.m_totalNum-=this.mapArray[o.y][o.x].number,a.push(o)}return console.log("this.m_selectMapList = ",this.m_selectMapList),{canTouch:r,cancelList:a,selectList:this.m_selectMapList}},r.onCancalTouch=function(){for(var t=0;t<this.m_selectMapList.length-1;t++){var e=this.m_selectMapList[t];this.mapArray[e.y][e.x].isSelect=!0}for(var r=0;r<1e4;++r)if(this.m_totalNum>=Math.pow(2,r)&&this.m_totalNum<Math.pow(2,r+1)){var a=this.m_selectMapList.length-1;this.mapArray[this.m_selectMapList[a].y][this.m_selectMapList[a].x].number=Math.pow(2,r);break}this.m_totalNum=0,this.m_selectMapList=new Array},r.onCreateNewGrid=function(){for(var t=new Array,e=new Array,r=this.mapHeight-1;r>=0;--r)for(var a=0;a<this.mapWidth;a++)if(this.mapArray[r][a].isSelect){for(var i=!0,s=r-1;s>=0;--s)if(0==this.mapArray[s][a].isSelect){i=!1,this.mapArray[s][a].isSelect=!0;var n=this.mapArray[s][a].number,h={y:s,x:a},m={y:r,x:a};this.mapArray[r][a].number=n,this.mapArray[r][a].isSelect=!1,t.push({old_index:h,new_index:m});break}if(i){var o=this.getCreateNumber();this.mapArray[r][a].number=o,this.mapArray[r][a].isSelect=!1,e.push({index:{y:r,x:a},number:o})}}return console.log("onCreateNewGrid , MoveArray = ",t),console.log("onCreateNewGrid , NewGridArray = ",e),{MoveArray:t,NewGridArray:e}},r._checkGridNumCanAddToList=function(t,e){return!(t<e)&&(t==e||this.m_totalNum>=t&&t==2*e)},r._checkIsInList=function(t,e){for(var r=this.m_selectMapList.length,a=-1,i=r-1;i>=0;--i)if(this._compareTwoIndexEqual(t,e[i])){a=r-1-i;break}return a},r._compareTwoIndexEqual=function(t,e){return t.x==e.x&&t.y==e.y},r._compareTwoIndexIsBorder=function(t,e){var r=Math.abs(t.x-e.x),a=Math.abs(t.y-e.y);return 1==r||1==a},e(t,[{key:"total_num",get:function(){return this.m_totalNum}},{key:"select_map_list",get:function(){return this.m_selectMapList}}]),t}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Game2248Panel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIStaticComp.ts","./ConfigData.ts","./EventMgr.ts"],(function(e){var t,o,n,i,a,r,f,s,l,c,h,m,_,d,u,g,p,v,C;return{setters:[function(e){t=e.inheritsLoose},function(e){o=e.cclegacy,n=e._decorator,i=e.input,a=e.Input,r=e.Label,f=e.Sprite,s=e.Color,l=e.instantiate,c=e.Button,h=e.UITransform,m=e.Vec3,_=e.Vec2,d=e.Tween,u=e.Component},function(e){g=e.UIStaticComp,p=e.ConsoleError},function(e){v=e.gConfigData},function(e){C=e.EventMgr}],execute:function(){var y;o._RF.push({},"ace3e79JxlGho945qDvDVkG","Game2248Panel",void 0);var S=n.ccclass,b=(n.property,{2:{textColor:"#ffffff",bgColor:"#00a3ec"},4:{textColor:"#ffffff",bgColor:"#ffc100"},8:{textColor:"#ffffff",bgColor:"#5bc100"},16:{textColor:"#ffffff",bgColor:"#00cbc7"},32:{textColor:"#ffffff",bgColor:"#ff6aba"},64:{textColor:"#ffffff",bgColor:"#ff8d35"},128:{textColor:"#ffffff",bgColor:"#e34e55"},256:{textColor:"#ffffff",bgColor:"#5d66d3"},512:{textColor:"#ffffff",bgColor:"#34a371"},1024:{textColor:"#ffffff",bgColor:"#aa5ad7"},2048:{textColor:"#ffffff",bgColor:"#efc32e"},4096:{textColor:"#ffffff",bgColor:"#fd3d3e"},8192:{textColor:"#ffffff",bgColor:"#ff1e1f"},16384:{textColor:"#ffffff",bgColor:"#b984b0"},32768:{textColor:"#ffffff",bgColor:"#9f4d9f"},65536:{textColor:"#ffffff",bgColor:"#5d5bd6"}});e("Game2248Panel",S("Game2248Panel")(y=function(e){function o(){for(var t,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(t=e.call.apply(e,[this].concat(n))||this).game_obj=null,t.m_MapNode=null,t.m_SelectNode=null,t.logic=null,t.m_mapSize=null,t.m_blockSize=null,t}t(o,e);var n=o.prototype;return n.Init=function(e,t){this.game_obj=e,this.logic=t,this.m_mapSize=v.Game2248.MapSize,this.m_blockSize=v.Game2248.BlockSize,this._initNode(),this._createMapItem(),this._resigistEvent(),this._resigistTouchEvent()},n.OnRestartGame=function(){for(var e=0;e<this.m_mapSize.height;++e)for(var t=0;t<this.m_mapSize.width;++t){var o={x:t,y:e},n=this._findItem(this.m_MapNode,o);this._updateItem(n,o)}},n.onDestroy=function(){console.log("onDestroyGameInOnePiecePanel ... "),i.off(a.EventType.TOUCH_START,this.onTouchStart,this),i.off(a.EventType.TOUCH_END,this.onTouchEnd,this),i.off(a.EventType.TOUCH_MOVE,this.onTouchMove,this)},n._initNode=function(){this.m_MapNode=g.findObjByPath(this.game_obj,"MapNode"),this.m_SelectNode=g.findObjByPath(this.game_obj,"SelectNode")},n._updateItem=function(e,t){var o=g.GetMapPosByIndex(t,this.m_blockSize,this.m_mapSize),n=g.findObjByPath(e,"Num"),i=g.findObjByPath(e,"Sprite"),a=this.logic.GetGridInfoByIndex(t);e.active=!0,e.name="Grid_"+t.y+"_"+t.x,n.getComponent(r).string=a+"",i.getComponent(f).color=new s(b[a].bgColor),e.position=o},n._createMapItem=function(){console.log("_createMapItem");for(var e=g.findObjByPath(this.m_MapNode,"OneItem"),t=0;t<this.m_mapSize.height;++t)for(var o=0;o<this.m_mapSize.width;++o){var n={x:o,y:t},i=l(e);this._updateItem(i,n),this.m_MapNode.addChild(i)}},n._findItem=function(e,t){var o=g.findObjByPath(e,"Grid_"+t.y+"_"+t.x);return p(null!=o),o},n._resigistEvent=function(){g.findObjByPath(this.game_obj,"PauseBtn").on(c.EventType.CLICK,this._onClickPauseBtn,this)},n._resigistTouchEvent=function(){i.on(a.EventType.TOUCH_START,this.onTouchStart,this),i.on(a.EventType.TOUCH_END,this.onTouchEnd,this),i.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this)},n.ConverPosToIndex=function(e){var t=this.m_MapNode.getComponent(h),o=t.convertToNodeSpaceAR(new m(e.x,e.y,0));console.log("getUILocation = ",o);var n=g.GetIndexByTouchPos(o,this.m_blockSize,this.m_mapSize),i=new _(n.x,n.y);if(n.x<0||n.y<0)return i;var a=g.GetMapPosByIndex(n,this.m_blockSize,this.m_mapSize);a=t.convertToWorldSpaceAR(new m(a.x,a.y,0)),console.log("correct_pos = ",a,e);var r=new _(e.x-a.x,e.y-a.y);console.log("delta = ",r,r.lengthSqr());var f=r.lengthSqr()<=Math.pow(v.Game2248.Touch_Circle_Radius,2);return console.log("isInCircle = ",f),f||(i.x=-3,i.y=-3),i},n._changeOneGridItemParent=function(e,t){var o=g.findObjByPath(e,"SelectBG");e.parent=t?this.m_SelectNode:this.m_MapNode,o.active=t},n._onTouchOneEvent=function(e){var t=e.getUILocation(),o=this.ConverPosToIndex(t);if(o.x>=0&&o.y>=0){var n=this.logic.onTouchOneGrid(o);if(n.canTouch){console.log("touchInfo",n.cancelList);var i=this._findItem(this.m_MapNode,o);this._changeOneGridItemParent(i,!0)}else if(0!=n.cancelList.length)for(var a=0;a<n.cancelList.length;++a){var r=this._findItem(this.m_SelectNode,n.cancelList[a]);this._changeOneGridItemParent(r,!1)}}},n._onClickPauseBtn=function(){console.log("_onClickPauseBtn ... "),C.getInstance().emit("onPauseGame")},n.onTouchStart=function(e){this._onTouchOneEvent(e)},n.onTouchEnd=function(e){var t=this.logic.select_map_list;this._removeSelectGridList(t),this.logic.onCancalTouch()},n.onTouchMove=function(e){this._onTouchOneEvent(e)},n._removeSelectGridList=function(e){var t=this;if(0!=e.length){for(var o=function(){var o=t._findItem(t.m_SelectNode,e[n]),i=new d(o),a=e[n+1],r=t._findItem(t.m_SelectNode,a);i.delay(v.Game2248.move_times*n).to(v.Game2248.move_times,{position:r.position}).call((function(){o.active=!1})).start()},n=0;n<e.length-1;++n)o();var i=this,a=e.length-1,r=this._findItem(this.m_SelectNode,e[a]);new d(r).delay(v.Game2248.move_times*(e.length-1)).call((function(){i._updateItem(r,e[a]),i._changeOneGridItemParent(r,!1)})).start(),this.getComponent(u).scheduleOnce((function(){i._createNewGrid()}),v.Game2248.move_times*e.length)}},n._createNewGrid=function(){console.log("_createNewGrid");for(var e=this.logic.onCreateNewGrid(),t=e.MoveArray.length,o=new Array,n=0;n<t;++n){var i=e.MoveArray[n].old_index,a=e.MoveArray[n].new_index,r=g.GetMapPosByIndex(a,this.m_blockSize,this.m_mapSize),f=this._findItem(this.m_MapNode,i);new d(f).to(v.Game2248.fall_times*(a.y-i.y),{position:r}).start(),o.push(f)}for(var s=0;s<o.length;++s){var l=e.MoveArray[s].new_index;o[s].name="Grid_"+l.y+"_"+l.x}var c=e.NewGridArray.length,h=this.m_SelectNode.children;p(h.length==c);for(var _=0;_<c;++_){var u=e.NewGridArray[_].index,C=(e.NewGridArray[_].number,h[0]);this._changeOneGridItemParent(C,!1),this._updateItem(C,u);var y=g.GetMapPosByIndex({y:0,x:u.x},this.m_blockSize,this.m_mapSize);C.position=new m(y.x,y.y+v.Game2248.BlockSize.height/2,0);var S=g.GetMapPosByIndex(u,this.m_blockSize,this.m_mapSize);new d(C).delay(v.Game2248.fall_times).to(v.Game2248.fall_times*(u.y+1),{position:S}).start(),h=this.m_SelectNode.children}},o}(u))||y);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameApp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResMgr.ts","./EventMgr.ts","./MainScenePanel.ts","./GameInOnePiece.ts","./GameMergeDice.ts","./Game2248Panel.ts","./Game2248.ts","./GameInOnePieceLoadingPanel.ts"],(function(e){var n,t,a,i,o,s,l,m,c,r,h,_,g,u,G;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){a=e.cclegacy,i=e._decorator,o=e.instantiate,s=e.Component,l=e.Prefab},function(e){m=e.default},function(e){c=e.EventMgr},function(e){r=e.MainScenePanel},function(e){h=e.GameInOnePiece},function(e){_=e.GameMergeDice},function(e){g=e.Game2248Panel},function(e){u=e.Game2248},function(e){G=e.GameInOnePieceLoadingPanel}],execute:function(){var P,d;a._RF.push({},"24fe977EiBGC50+lwQNg3yD","GameApp",void 0);var I=i.ccclass;i.property,e("GameApp",I("GameApp")(((d=function(e){function a(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))||this).m_GamePanel=null,n.m_Game2248Panel=null,n.current_game=null,n.m_FinishStagePanel=null,n.m_GalleryPanel=null,n.PausePanel=null,n.m_MainScenePanel=null,n.m_BottomBtnListNode=null,n.m_TopInfoNode=null,n.GameOverPanel=null,n.curScoreNode=null,n.maxScoreNode=null,n.pauseBtn=null,n.isPause=!1,n.isGameOver=!1,n.oldData=null,n.m_selectLevel=0,n}n(a,e),a.getInstance=function(){return null==a.instance&&(a.instance=new a),a.instance};var i=a.prototype;return i.onLoad=function(){null===a.instance?a.instance=this:this.destroy()},i.Init=function(){c.getInstance().on("onStartGame2248",this._onStartGame2248,this),c.getInstance().on("onStartGameInOnePiece",this._onStartGameInOnePiece,this),c.getInstance().on("onStartGameMergeDice",this._onStartGameMergeDice,this),c.getInstance().on("onEndGame",this._onEndGame,this)},i.GameStart=function(){var e=this;console.log("GameStart....."),this.Init();var n={GUI:{assetType:l,urls:["Prefabs/GameInOnePiece/GameInOnePieceLoadingPanel"]}};m.getInstance().preloadResPackage(n,(function(e,n){}),(function(){e.EnterGame()}))},i._onGameClear=function(){console.log("_onGameClear...."),this._onSaveData(),c.getInstance().emit("onShowNextBtn")},i._getCurLevelInfo=function(e){return null},i.CreateGamePanel=function(e){void 0===e&&(e=null);var n=m.getInstance().getAsset("GUI","Prefabs/GamePanel");this.m_GamePanel=o(n);var t=this._getCurLevelInfo(e);this.m_GamePanel.addComponent(GamePanel).Init(this.m_GamePanel,t),this.node.getChildByName("center").addChild(this.m_GamePanel)},i._onCreateMainScenePanel=function(){var e=m.getInstance().getAsset("GUI","Prefabs/MainScenePanel");this.m_MainScenePanel=o(e),this.m_MainScenePanel.addComponent(r).Init(this.m_MainScenePanel),this.node.addChild(this.m_MainScenePanel)},i._onCreateGameInOnePieceLoadingPanel=function(){var e=m.getInstance().getAsset("GUI","Prefabs/GameInOnePiece/GameInOnePieceLoadingPanel");this.m_MainScenePanel=o(e),this.m_MainScenePanel.addComponent(G).Init(this.m_MainScenePanel),this.node.addChild(this.m_MainScenePanel),this.m_MainScenePanel.setSiblingIndex(0),c.getInstance().emit("onLoadingPanelPrepare")},i._onCreateGame2248Panel=function(){var e=m.getInstance().getAsset("GUI","Prefabs/Game2248Panel");this.m_Game2248Panel=o(e),this.m_Game2248Panel.addComponent(g).Init(this.m_Game2248Panel),this.node.addChild(this.m_Game2248Panel)},i._onCreateGamePanel=function(e){this.current_game=new e,this.current_game.Init(this.node)},i._onCreateTopInfo=function(){if(this.m_TopInfoNode)this.m_TopInfoNode.getComponent(TopInfo).ShowLevelNode(!1);else{var e=m.getInstance().getAsset("GUI","Prefabs/TopInfo");this.m_TopInfoNode=o(e),this.m_TopInfoNode.addComponent(TopInfo).Init(this.m_TopInfoNode),this.node.getChildByName("top").addChild(this.m_TopInfoNode)}},i._onCreateBottomBtnList=function(){if(this.m_BottomBtnListNode)this.m_BottomBtnListNode.active=!0;else{var e=m.getInstance().getAsset("GUI","Prefabs/BottomBtnList");this.m_BottomBtnListNode=o(e),this.m_BottomBtnListNode.addComponent(BottomBtnList).Init(this.m_BottomBtnListNode),this.node.getChildByName("bottom").addChild(this.m_BottomBtnListNode)}},i.CreateFinishStagePanel=function(){var e=m.getInstance().getAsset("GUI","Prefabs/FinishStagePanel");this.m_FinishStagePanel=o(e),this.node.getChildByName("center").addChild(this.m_FinishStagePanel);var n=this.m_GamePanel.getComponent(GamePanel).GetGridNode(),t=n.getPosition();console.log("gridNode.getPosition() = ",t),n.parent=this.m_FinishStagePanel,n.setPosition(t)},i.EnterGame=function(){console.log("EnterGame---"),this._onCreateGameInOnePieceLoadingPanel()},i.PaintOneGrid=function(e){return this.m_nonogramUtil.PaintOneGrid(e)},i._onStartGame2248=function(){console.log("_onStartGame2248 ..."),this._onCreateGamePanel(u),this.m_MainScenePanel.removeFromParent(),this.m_MainScenePanel=null},i._onStartGameInOnePiece=function(){console.log("_onStartGameInOnePiece ..."),this._onCreateGamePanel(h)},i._onStartGameMergeDice=function(){console.log("_onStartGameMergeDice ..."),this._onCreateGamePanel(_),this.m_MainScenePanel.removeFromParent(),this.m_MainScenePanel=null},i._onEndGame=function(){this.current_game.OnEndGame(),delete this.current_game,this.current_game=null,this._onCreateMainScenePanel()},i._onEndGameMergeDice=function(){this.current_game.OnEndGame(),delete this.current_game,this.current_game=null,this._onCreateMainScenePanel()},i._onGameStart=function(){this.m_MainScenePanel.removeFromParent(),this.m_BottomBtnListNode.active=!1,this.m_TopInfoNode.getComponent(TopInfo).ShowLevelNode(!0),this.m_FinishStagePanel=null,this.CreateGamePanel(this.m_selectLevel)},i._onGameOver=function(){console.log("_onGameOver_onGameOver_onGameOver"),this.SetIsGameOver(!0)},i._onCheckEmptyGrid=function(){this.m_nonogramUtil.OnCheckEmptyGrid()},i._onCalAddExp=function(){var e=GameData.getInstance().get_cur_exp,n=a.getInstance().select_level,t=GameData.getInstance().cur_level,i=GameData.getInstance().getStar(n),o=LevelInfo1[n].grid_info.length,s=gConfigData.cStarInfo[o].GetExp[3-i],l=GameData.getInstance().star,m=gConfigData.cStarInfo[o].GetExp[3-l],c=0;c=n==t?e:Math.max(m-s,0),console.log("finalGetExp == ",m,s,c),0!=c&&this._onAddExp(c)},i._onCheckFinishStage=function(){if(console.log("_onCheckFinishStage ============"),this.m_nonogramUtil.OnCheckFinishStage()){c.getInstance().emit("onFinishStage"),this._onCalAddExp(),GameData.getInstance().OnSaveLevelInfoData(this.m_selectLevel);var e=GameData.getInstance().cur_level;this.m_selectLevel++,this.m_selectLevel>e&&(GameData.getInstance().cur_level=this.m_selectLevel),this._onSaveData()}},i._onShowTips=function(){this.m_nonogramUtil.OnShowTips()},i._onAddExp=function(e){var n=GameData.getInstance().account_cur_exp,t=GameData.getInstance().account_total_exp,a=GameData.getInstance().account_level;(n+=e)==t&&(n=0,a++),GameData.getInstance().account_cur_exp=n,GameData.getInstance().account_level=a,GameData.getInstance().OnSaveData(),c.getInstance().emit("onUpdateAccountExp")},i._onRestartGame=function(){GameData.getInstance().star=3;var e=LevelInfo1[GameData.getInstance().cur_level].grid_info.length;GameData.getInstance().faild_times=0;var n=gConfigData.cStarInfo[e].GetExp[0];GameData.getInstance().get_max_exp=n,GameData.getInstance().get_cur_exp=n,this.m_nonogramUtil.OnRestartGame(),this.m_GamePanel.getComponent(GamePanel).OnRestartGame()},i._onOpenGalleryPanel=function(){var e=m.getInstance().getAsset("GUI","Prefabs/GalleryPanel");this.m_GalleryPanel=o(e),this.node.getChildByName("center").addChild(this.m_GalleryPanel),this.m_GalleryPanel.addComponent(GalleryPanel).Init(this.m_GalleryPanel),this.m_MainScenePanel.active=!1},i._onCloseGalleryPanel=function(){this.m_GalleryPanel.removeFromParent(),this.m_MainScenePanel.active=!0},i.SelectBrush=function(e){this.m_nonogramUtil.Setbrush(e)},i._onLoadData=function(){GameData.getInstance().cur_level=Number(localStorage.getItem("CurLevel"))||1,GameData.getInstance().remainderTipCount=Number(localStorage.getItem("RemainderTipsCount"))||5,GameData.getInstance().star=3;var e=LevelInfo1[GameData.getInstance().cur_level].grid_info.length;GameData.getInstance().faild_times=0;var n=gConfigData.cStarInfo[e].GetExp[0];GameData.getInstance().get_max_exp=n,GameData.getInstance().get_cur_exp=n},i._onSaveData=function(){},i.OnClickPause=function(){if(console.log("onClickPause"),this.PausePanel)this.PausePanel.active=!0;else{var e=m.getInstance().getAsset("GUI","Prefabs/PausePanel");this.PausePanel=o(e),this.PausePanel.addComponent(PausePanel).Init(this.PausePanel),this.node.getChildByName("center").addChild(this.PausePanel)}this.SetIsPause(!0)},i.OnClickMainScenePanel=function(){this._onDestroyGamePanel(),this._onDestroyPausePanel(),this.SetIsPause(!1),this._onCreateMainScenePanel(),this._onCreateTopInfo(),this._onCreateBottomBtnList()},i.GetIsGameOver=function(){return this.isGameOver},i.SetIsGameOver=function(e){this.isGameOver=e},i.GetIsPause=function(){return this.isPause},i.SetIsPause=function(e){this.isPause=e},t(a,[{key:"select_level",get:function(){return this.m_selectLevel}}]),a}(s)).instance=null,P=d))||P);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameBase.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,o,s;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,s=e.Component}],execute:function(){var r;t._RF.push({},"9eb60VdhVNH3bywd5jMGP44","GameBase",void 0);var i=o.ccclass;o.property,e("GameBase",i("GameBase")(r=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return(n=e.call.apply(e,[this].concat(o))||this).game_obj=null,n.resPkg=null,n}n(t,e);var o=t.prototype;return o.Init=function(e){this.game_obj=e,this._LoadRes(),this._resigistEvent()},o._LoadRes=function(){this.EnterGame()},o.EnterGame=function(){console.log("GameBase EnterGame...")},o.PlayBackGround=function(){},o._resigistEvent=function(){console.error("子类没有注册触摸事件， _resigistEvent")},o._unResigistEvent=function(){console.error("子类没有注销触摸事件, _unResigistEvent")},o.OnEndGame=function(){this._unResigistEvent()},t}(s))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameClickMeAddOne.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameBase.ts"],(function(e){var t,n,c,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,c=e._decorator},function(e){r=e.GameBase}],execute:function(){var o;n._RF.push({},"bd3089L2LNA84DaF7owh7dR","GameClickMeAddOne",void 0);var a=c.ccclass;c.property,e("GameClickMeAddOne",a("GameClickMeAddOne")(o=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var c=n.prototype;return c.start=function(){},c.update=function(e){},n}(r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameInOnePiece.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameBase.ts","./ResMgr.ts","./GameInOnePiecePanel.ts","./EventMgr.ts","./GameInOnePieceLogic.ts","./CommonGamePausePanel.ts","./AudioMgr.ts","./CommonGameOverPanel.ts","./CommonGameRewardPanel.ts","./SDKMgr.ts","./SaveData.ts","./CommonGameTeachingPanel.ts"],(function(e){var n,a,t,o,s,i,m,l,r,P,c,g,u,h,_,d;return{setters:[function(e){n=e.inheritsLoose},function(e){a=e.cclegacy,t=e._decorator,o=e.instantiate},function(e){s=e.GameBase},function(e){i=e.default},function(e){m=e.GameInOnePiecePanel},function(e){l=e.EventMgr},function(e){r=e.GameInOnePieceLogic},function(e){P=e.CommonGamePausePanel},function(e){c=e.AudioMgr},function(e){g=e.CommonGameOverPanel},function(e){u=e.CommonGameRewardPanel},function(e){h=e.SDKMgr},function(e){_=e.SaveData},function(e){d=e.CommonGameTeachingPanel}],execute:function(){var G;a._RF.push({},"a3b23ASy1tCA57JiVfon201","GameInOnePiece",void 0);var f=t.ccclass;t.property,e("GameInOnePiece",f("GameInOnePiece")(G=function(e){function a(){for(var n,a=arguments.length,t=new Array(a),o=0;o<a;o++)t[o]=arguments[o];return(n=e.call.apply(e,[this].concat(t))||this).resPkg={},n.m_gamePanel=null,n.m_pausePanel=null,n.m_gameoverPanel=null,n.m_guidePanel=null,n.logic=null,n}n(a,e);var t=a.prototype;return t.Init=function(n){e.prototype.Init.call(this,n)},t._LoadRes=function(){e.prototype._LoadRes.call(this)},t._resigistEvent=function(){l.getInstance().on("onPauseGame",this._onCreatePausePanel,this),l.getInstance().on("onRestartGame",this._onRestartGame,this),l.getInstance().on("onGameOver",this._onGameOver,this),l.getInstance().on("onRewardProp",this._onCreateRewardPanel,this)},t._unResigistEvent=function(){l.getInstance().off("onPauseGame",this._onCreatePausePanel,this),l.getInstance().off("onRestartGame",this._onRestartGame,this),l.getInstance().off("onGameOver",this._onGameOver,this),l.getInstance().off("onRewardProp",this._onCreateRewardPanel,this)},t.EnterGame=function(){console.log("GameBase GameInOnePiece..."),this.PlayBackGround(),this.logic=new r,this._CreateGamePanel(),this._checkHasGuidePanel(),h.getInstance().showBannerAd(!0)},t._createLoadingPanel=function(){},t.PlayBackGround=function(){var e=i.getInstance().getAsset("Sounds","InOnePieceSounds/background");c.getInstance().Play(e,.5)},t._CreateGamePanel=function(){var e=i.getInstance().getAsset("GUI","Prefabs/GameInOnePiece/GameInOnePiecePanel");this.m_gamePanel=o(e),this.m_gamePanel.addComponent(m).Init(this.m_gamePanel,this.logic),this.game_obj.addChild(this.m_gamePanel),this.m_gamePanel.setSiblingIndex(0)},t._checkHasGuidePanel=function(){if(!_.OnLoadData("GameInOnePiece","finish_guide")){var e=i.getInstance().getAsset("GUI","Prefabs/Common/CommonGameTeachingPanel");this.m_guidePanel=o(e),this.m_guidePanel.addComponent(d).Init(this.m_guidePanel),this.game_obj.addChild(this.m_guidePanel),this.m_guidePanel.setSiblingIndex(1)}},t._onCreatePausePanel=function(){if(h.getInstance().showInterstitialAd(),null==this.m_pausePanel){var e=i.getInstance().getAsset("GUI","Prefabs/Common/CommonGamePausePanel");this.m_pausePanel=o(e),this.m_pausePanel.addComponent(P).Init(this.m_pausePanel),this.game_obj.addChild(this.m_pausePanel)}else this.m_pausePanel.getComponent(P).onShowPanel()},t._onRestartGame=function(){this.m_pausePanel&&(this.m_pausePanel.active=!1),this.m_gameoverPanel&&(this.m_gameoverPanel.active=!1),this.logic.RestartGame(),this.m_gamePanel.getComponent(m).OnRestartGame()},t._onGameOver=function(){if(h.getInstance().showInterstitialAd(),null==this.m_gameoverPanel){var e=i.getInstance().getAsset("GUI","Prefabs/Common/CommonGameOverPanel");this.m_gameoverPanel=o(e),this.m_gameoverPanel.addComponent(g).Init(this.m_gameoverPanel),this.game_obj.addChild(this.m_gameoverPanel)}else this.m_gameoverPanel.getComponent(g).onActive()},t._onCreateRewardPanel=function(e){console.log("data = ",e);var n=i.getInstance().getAsset("GUI","Prefabs/Common/CommonGameRewardPanel"),a=o(n);a.addComponent(u).Init(a,e),this.game_obj.addChild(a)},t.OnEndGame=function(){e.prototype.OnEndGame.call(this),this.m_pausePanel&&(this.m_pausePanel.getComponent(P).onDestroy(),this.m_pausePanel.removeFromParent()),this.m_gameoverPanel&&(this.m_gameoverPanel.getComponent(g).onDestroy(),this.m_gameoverPanel.removeFromParent()),this.m_gamePanel.getComponent(m).onDestroy(),this.m_pausePanel.removeFromParent(),this.m_gamePanel.removeFromParent(),this.m_pausePanel=null,this.m_gamePanel=null},a}(s))||G);a._RF.pop()}}}));

System.register("chunks:///_virtual/GameInOnePieceData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a,c;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,c=e.Component}],execute:function(){var r;n._RF.push({},"4e1ddZVFNtGUKxYqLSr+PQc","GameInOnePieceData",void 0);var o=a.ccclass;a.property,e("GameInOnePieceData",o("GameInOnePieceData")(r=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var a=n.prototype;return a.start=function(){},a.update=function(e){},n}(c))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameInOnePieceLoadingPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIStaticComp.ts","./EventMgr.ts","./GameInOnePiecePanel.ts","./ResMgr.ts"],(function(e){var n,t,o,i,a,s,c,r,u,l,m,f,g,P;return{setters:[function(e){n=e.inheritsLoose},function(e){t=e.cclegacy,o=e._decorator,i=e.Component,a=e.Button,s=e.Animation,c=e.Prefab,r=e.SpriteFrame,u=e.AudioClip,l=e.JsonAsset},function(e){m=e.UIStaticComp},function(e){f=e.EventMgr},function(e){g=e.PropInfo},function(e){P=e.default}],execute:function(){var d;t._RF.push({},"402d36uZIxFZr7ReADwu/wz","GameInOnePieceLoadingPanel",void 0);var h=o.ccclass;o.property,e("GameInOnePieceLoadingPanel",h("GameInOnePieceLoadingPanel")(d=function(e){function t(){for(var n,t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];return(n=e.call.apply(e,[this].concat(o))||this).game_obj=null,n.resPkg={GUI:{assetType:c,urls:["Prefabs/Common/CommonGamePausePanel","Prefabs/Common/CommonGameOverPanel","Prefabs/Common/CommonGameRewardPanel","Prefabs/Common/CommonGameTeachingPanel","Prefabs/GameInOnePiece/GameInOnePiecePanel"]},Sprite:{assetType:r,urls:[]},Sounds:{assetType:u,urls:["InOnePieceSounds/background","InOnePieceSounds/click_effect","InOnePieceSounds/gameover_effect","InOnePieceSounds/merge_effect","InOnePieceSounds/BombAction","InOnePieceSounds/ShuffleAction","InOnePieceSounds/UndoAction","InOnePieceSounds/SwitchFistTilePicked","InOnePieceSounds/SwitchAction","InOnePieceSounds/MagnetAction"]},Languages:{assetType:l,urls:["en","zh"]}},n}n(t,e);var o=t.prototype;return o.Init=function(e){this.game_obj=e,f.getInstance().on("onYolkStudioFinish",this._startLoadingRes,this)},o._loadingRes=function(){for(var e=this,n=0;n<g.length;n++){var t=g[n];this.resPkg.Sprite.urls.push(t.asset+"")}P.getInstance().preloadResPackage(this.resPkg,(function(e,n){}),(function(){e._onStartGame()}))},o._startLoadingRes=function(){console.log("_startLoadingRes === "),this._loadingRes();var e=this;this.getComponent(i).scheduleOnce((function(){e._playAnimation(),e._prepareStartGame()}),.05),this._resigistEvent()},o._resigistEvent=function(){m.findObjByPath(this.game_obj,"Clear").on(a.EventType.CLICK,this._onClickClearBtn,this)},o._unResigistEvent=function(){f.getInstance().off("onYolkStudioFinish",this._startLoadingRes,this)},o._onClickClearBtn=function(){localStorage.clear()},o._prepareStartGame=function(){var e=this;this.getComponent(i).scheduleOnce((function(){e._removeSelf()}),3)},o._playAnimation=function(){this.game_obj.getComponent(s).play("StartGame")},o._onStartGame=function(){f.getInstance().emit("onStartGameInOnePiece")},o._removeSelf=function(){this._unResigistEvent(),this.node.removeFromParent()},t}(i))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameInOnePieceLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigData.ts","./EventMgr.ts","./Calculator.ts","./SaveData.ts","./GameInOnePiecePanel.ts","./UIStaticComp.ts"],(function(e){var r,t,a,n,i,s,h,m,o,_;return{setters:[function(e){r=e.createClass},function(e){t=e.cclegacy,a=e._decorator,n=e.Vec2},function(e){i=e.gConfigData},function(e){s=e.EventMgr},function(e){h=e.Calculator},function(e){m=e.SaveData},function(e){o=e.PropInfo},function(e){_=e.ConsoleError}],execute:function(){t._RF.push({},"e0f8diC7mhD+KuoWirGW1gH","GameInOnePieceLogic",void 0);a.ccclass,a.property;var u=[{x:0,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1}];e("GameInOnePieceLogic",function(){function e(){this.mapWidth=0,this.mapHeight=0,this.mapArray=null,this.m_selectMapList=null,this.m_current_score=0,this.m_best_score=0,this.m_max_number=0,this.m_game_name="GameInOnePiece",this.m_prop_num=null,this.m_history_array_list=null,this.m_select_prop_index=-1,this.mapWidth=i.GameInOnePiece.MapSize.width,this.mapHeight=i.GameInOnePiece.MapSize.height,this._onLoadScore();var e=Number(m.OnLoadData(this.m_game_name,"max_number"));this._initMaxNumgber(e),this._initPropNumber(),this._onCreateMapArray(),this.m_selectMapList=new Array,s.getInstance().on("onClickPropIndex",this._onClickPropIndex,this),s.getInstance().on("onAddOneProp",this._addOneProp,this)}var t=e.prototype;return t._onCreateMapArray=function(){var e=m.OnLoadData(this.m_game_name,"map_array");this.mapArray=new Array;for(var r=0;r<this.mapHeight;r++){for(var t=new Array,a=0;a<this.mapWidth;a++){var i={cur_index:new n(a,r),parent_index:new n(a,r),number:0,power:"",isSelect:!1};t.push(i)}this.mapArray.push(t)}var s=Boolean(m.OnLoadData(this.m_game_name,"GameOver"));if(this.m_history_array_list=null!=e&&""!=e?JSON.parse(e):[],null==e||""==e||s){m.OnRemoveData(this.m_game_name,"GameOver");for(var h=0;h<this.mapHeight;h++)for(var o=0;o<this.mapWidth;o++)this.mapArray[h][o].number=this.getCreateNumber();this._onSaveMapData()}else for(var _=JSON.parse(e)[0],u=0;u<this.mapHeight;u++)for(var c=0;c<this.mapWidth;c++)this.mapArray[u][c].number=_[u][c]},t._onLoadScore=function(){var e=Number(m.OnLoadData(this.m_game_name,"cur_score")),r=Number(m.OnLoadData(this.m_game_name,"best_score"));this.m_current_score=e||0,this.m_best_score=r||0},t._onSaveMapData=function(e){void 0===e&&(e=!1);for(var r=new Array,t=0;t<this.mapHeight;t++){for(var a=new Array,n=0;n<this.mapWidth;n++)a.push(this.mapArray[t][n].number);r.push(a)}e&&this.m_history_array_list.splice(0),this.m_history_array_list.splice(0,0,r),this.m_history_array_list.length>i.GameInOnePiece.max_save_undo_count+1&&this.m_history_array_list.splice(i.GameInOnePiece.max_save_undo_count+1,1),m.OnSaveData(this.m_game_name,"map_array",this.m_history_array_list)},t._onSaveMaxNumber=function(){m.OnSaveData(this.m_game_name,"max_number",this.max_number)},t._onSavePropNumber=function(){m.OnSaveData(this.m_game_name,"prop_number",this.m_prop_num)},t._onSaveScore=function(){m.OnSaveData(this.m_game_name,"cur_score",this.m_current_score),m.OnSaveData(this.m_game_name,"best_score",this.m_best_score)},t._onClickPropIndex=function(e){this.m_select_prop_index=e},t.RestartGame=function(){this._initMaxNumgber();for(var e=0;e<this.mapHeight;e++)for(var r=0;r<this.mapWidth;r++)this.mapArray[e][r].number=this.getCreateNumber(),this.mapArray[e][r].isSelect=!1;this.m_current_score=0,this._onSaveScore(),this._onSaveMapData(!0)},t._getCreateWeightArray=function(){for(var e=this.max_number,r=new Array,t=1,a=e;a>=1;a--){if(e-a>=i.GameInOnePiece.max_diffence_count){t=a;break}r.splice(0,0,i.GameInOnePiece.create_weight_array[e-a])}return{weight:r,min_num:t}},t.getCreateNumber=function(){var e=this._getCreateWeightArray();return h.RandomIndexByWeights(e.weight)+e.min_num},t._initMaxNumgber=function(e){void 0===e&&(e=void 0),this.m_max_number=e||5,this._onSaveMaxNumber()},t._initPropNumber=function(){this.m_prop_num=new Array;var e=m.OnLoadData(this.m_game_name,"prop_number"),r=void 0,t=null!=e&&""!=e;t&&(r=JSON.parse(e));for(var a=0;a<o.length;++a){var n=t?r[a]:2;this.m_prop_num.push(n)}this._onSavePropNumber()},t._updateScore=function(e){this.m_current_score+=e,this.m_best_score=Math.max(this.m_best_score,this.m_current_score),this._onSaveScore()},t._updateMaxNumber=function(e){e>this.max_number&&(this.max_number=e,this._onSaveMaxNumber())},t.GetGridInfoByIndex=function(e){return _(this.mapArray[e.y][e.x]),this.mapArray[e.y][e.x].number},t.GetGridIsSelectByIndex=function(e){return _(this.mapArray[e.y][e.x]),this.mapArray[e.y][e.x].isSelect},t.onRemoveTooMinGrid=function(){for(var e=new Array,r=0;r<this.mapHeight;r++)for(var t=0;t<this.mapWidth;t++){var a=new n(t,r);Math.abs(this.GetGridInfoByIndex(a))<this.max_number-i.GameInOnePiece.max_diffence_count&&(this.mapArray[r][t].isSelect=!0,e.push(a))}return e},t._CanMergeMagnet=function(e){for(var r=[[[-1,-1],[0,-1],[-1,0]],[[-1,1],[0,1],[-1,0]],[[1,-1],[0,-1],[1,0]],[[1,1],[0,1],[1,0]]],t=0;t<r.length;t++){for(var a=r[t],i=!0,s=0;s<a.length;s++){var h=new n(e.x+a[s][0],e.y+a[s][1]);if(!this._checkIndexIsInGrid(h)||1!=this.mapArray[h.y][h.x].isSelect){i=!1;break}}if(i)return!0}return!1},t.onTouchOneGrid=function(e){var r=void 0;if(this.CheckIndexIsMagnet(e)){if((r=this._useMagnet(e)).length<=1)return this._cancalAllSelect(),{canMerge:!1,mergeList:[]};var t=Math.abs(this.mapArray[e.y][e.x].number*r.length);return this._updateScore(t),{canMerge:!0,mergeList:r}}if((r=this._findSameNumberGridDFS(e)).length<2)return this._cancalAllSelect(),{canMerge:!1,mergeList:[]};var a=this.mapArray[e.y][e.x].number*r.length;return this._updateScore(a),this.mapArray[e.y][e.x].isSelect=!1,4===r.length&&this._CanMergeMagnet(e)?(this.mapArray[e.y][e.x].isSelect=!1,this.mapArray[e.y][e.x].number=-this.mapArray[e.y][e.x].number):(this.mapArray[e.y][e.x].number+=1,this._updateMaxNumber(this.mapArray[e.y][e.x].number)),{canMerge:!0,mergeList:r}},t.onCancalTouch=function(){for(var e=0;e<this.m_selectMapList.length-1;e++){var r=this.m_selectMapList[e];this.mapArray[r.y][r.x].isSelect=!0}for(var t=0;t<1e4;++t)if(this.m_current_score>=Math.pow(2,t)&&this.m_current_score<Math.pow(2,t+1)){var a=this.m_selectMapList.length-1;this.mapArray[this.m_selectMapList[a].y][this.m_selectMapList[a].x].number=Math.pow(2,t);break}this.m_current_score=0,this.m_selectMapList=new Array},t.onCreateNewGrid=function(){for(var e=new Array,r=new Array,t=this.mapHeight-1;t>=0;--t)for(var a=0;a<this.mapWidth;a++)if(this.mapArray[t][a].isSelect){for(var n=!0,i=t-1;i>=0;--i)if(0==this.mapArray[i][a].isSelect){n=!1,this.mapArray[i][a].isSelect=!0;var s=this.mapArray[i][a].number,h={y:i,x:a},m={y:t,x:a};this.mapArray[t][a].number=s,this.mapArray[t][a].isSelect=!1,e.push({old_index:h,new_index:m});break}if(n){var o=this.getCreateNumber();this.mapArray[t][a].number=o,this.mapArray[t][a].isSelect=!1,r.push({index:{y:t,x:a},number:o})}}return this._onSaveMapData(),{MoveArray:e,NewGridArray:r}},t.onCheckGameOver=function(){for(var e=0;e<this.mapHeight-1;e++)for(var r=0;r<this.mapWidth-1;r++)if(this.mapArray[e][r].number===this.mapArray[e][r+1].number||this.mapArray[e][r].number===this.mapArray[e+1][r].number)return!1;for(var t=0;t<this.mapHeight-1;t++)if(this.mapArray[t][this.mapWidth-1].number===this.mapArray[t+1][this.mapWidth-1].number)return!1;for(var a=0;a<this.mapWidth-1;a++)if(this.mapArray[this.mapHeight-1][a].number===this.mapArray[this.mapHeight-1][a+1].number)return!1;return m.OnSaveData(this.m_game_name,"GameOver",!0),!0},t._chechPropEnough=function(e){return this.GetPropCountByIndex(e)>0},t._cloneBlock=function(e){return{cur_index:e.cur_index.clone(),parent_index:e.parent_index.clone(),number:e.number,power:"",isSelect:e.isSelect}},t._switchTwoBlock=function(e,r){var t=this.mapArray[e.y][e.x],a={cur_index:t.cur_index.clone(),parent_index:t.parent_index.clone(),number:t.number,power:t.power,isSelect:t.isSelect};this.mapArray[e.y][e.x]=this.mapArray[r.y][r.x],this.mapArray[r.y][r.x]=a},t._shuffleMapArray=function(){for(var e=this.mapArray.length,r=this.mapArray[0].length,t=[],a=0;a<e;a++)for(var i=0;i<r;i++)t.push(this.mapArray[a][i]);var s,h=[];do{s=[].concat(t).sort((function(){return Math.random()-.5})),h=[];for(var m=0;m<t.length;m++){var o=new n(t[m].cur_index.x,t[m].cur_index.y),_=new n(s[m].cur_index.x,s[m].cur_index.y);o.x===_.x&&o.y===_.y||h.push({old_index:o,new_index:_}),this.mapArray[o.y][o.x]=s[m]}}while(0===h.length);return this._onSaveMapData(),h},t._undoOnce=function(){if(this.m_history_array_list.length<=1)return[];var e=this.m_history_array_list[0];this.m_history_array_list.splice(0,1),m.OnSaveData(this.m_game_name,"map_array",this.m_history_array_list);for(var r=0;r<this.mapHeight;r++)for(var t=0;t<this.mapWidth;t++)this.mapArray[r][t].number=this.m_history_array_list[0][r][t];return e},t._resetBlockIndex=function(){console.log("_resetBlockIndex111 = ",this.mapArray);for(var e=0;e<this.mapArray.length;e++)for(var r=0;r<this.mapArray[e].length;r++)this.mapArray[e][r].cur_index=new n(r,e)},t.OnUseShuffleProp=function(){return this._chechPropEnough(2)?(this._subOneProp(2),this._resetBlockIndex(),this._shuffleMapArray()):[]},t.OnUseBombProp=function(e){return!!this._chechPropEnough(3)&&(_(null!==this.mapArray[e.y][e.x]),this.mapArray[e.y][e.x].isSelect=!0,this._subOneProp(3),!0)},t.OnUseSwitchProp=function(e,r){this._switchTwoBlock(e,r),this._subOneProp(0)},t.OnUseUndoProp=function(){if(!this._chechPropEnough(1))return[];var e=this._undoOnce();return 0!==e.length&&this._subOneProp(1),e},t._findSameNumberGridDFS=function(e){var r=this._findItem(e),t=r.number;if(r.isSelect)return[];var a=new Array,i=new Array,s=0;for(a.push({index:e,order:0}),i.push({cur_index:e,parent_index:e,order:0});0!=a.length;){var h=a[0].index;this._findItem(h).isSelect=!0;for(var m=0;m<4;++m){var o=new n(h.x+u[m].x,h.y+u[m].y);if(this._checkIndexIsInGrid(o)){var _=this._findItem(o);if(!_.isSelect&&_.number==t){_.parent_index=h,_.isSelect=!0;var c=a[0].order+1;s=Math.max(s,c),i.push({cur_index:o,parent_index:h,order:c}),a.push({index:o,order:c})}}}a.splice(0,1)}for(var p=0;p<i.length;p++)i[p].order=s-i[p].order;return i},t._useMagnet=function(e){for(var r=this.mapArray[e.y][e.x].number,t=new Array,a=0;a<this.mapHeight;a++)for(var i=0;i<this.mapWidth;i++){var s=new n(i,a);s.strictEquals(e)?(this.mapArray[a][i].number=Math.abs(this.mapArray[a][i].number)+1,t.push({cur_index:s})):Math.abs(this.mapArray[a][i].number)===Math.abs(r)&&(this.mapArray[a][i].isSelect=!0,t.push({cur_index:s}))}return t},t._checkGridNumCanAddToList=function(e,r){return!(e<r)&&(e==r||this.m_current_score>=e&&e==2*r)},t._checkIndexIsInGrid=function(e){return e.x>=0&&e.y>=0&&e.x<this.mapWidth&&e.y<this.mapHeight},t._findItem=function(e){return _(0!=this._checkIndexIsInGrid(e)),this.mapArray[e.y][e.x]},t._checkIsInList=function(e,r){for(var t=this.m_selectMapList.length,a=-1,n=t-1;n>=0;--n)if(this._compareTwoIndexEqual(e,r[n])){a=t-1-n;break}return a},t._compareTwoIndexEqual=function(e,r){return e.x==r.x&&e.y==r.y},t._compareTwoIndexIsBorder=function(e,r){var t=Math.abs(e.x-r.x),a=Math.abs(e.y-r.y);return 1==t||1==a},t._cancalAllSelect=function(){for(var e=0;e<this.mapArray.length;e++)for(var r=0;r<this.mapArray[0].length;r++)this.mapArray[e][r].isSelect=!1},t.CheckIndexIsMagnet=function(e){return this.mapArray[e.y][e.x].number<0},t.GetPropCountByIndex=function(e){return _(null!=this.m_prop_num[e]),this.m_prop_num[e]},t._subOneProp=function(e){_(null!=this.m_prop_num[e]),this.m_prop_num[e]-=1,this._onSavePropNumber()},t._addOneProp=function(){-1!=this.m_select_prop_index&&(this.m_prop_num[this.m_select_prop_index]+=2,console.log("this.m_prop_num[this.m_select_prop_index] = ",this.m_prop_num[this.m_select_prop_index]),s.getInstance().emit("onUpdateProp",[this.m_select_prop_index]),this._onSavePropNumber(),this.m_select_prop_index=-1)},r(e,[{key:"max_number",get:function(){return this.m_max_number},set:function(e){this.m_max_number=e}},{key:"current_score",get:function(){return this.m_current_score}},{key:"best_score",get:function(){return this.m_best_score}},{key:"select_map_list",get:function(){return this.m_selectMapList}},{key:"can_undo",get:function(){return this.m_history_array_list.length>1}}]),e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GameInOnePiecePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigData.ts","./EventMgr.ts","./UIStaticComp.ts","./AudioMgr.ts","./ResMgr.ts","./LocalizationMgr.ts"],(function(e){var t,n,i,o,a,r,s,c,h,_,d,m,l,f,u,p,g,I,y,v,P,G,O,b;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){i=e.cclegacy,o=e._decorator,a=e.Component,r=e.Vec2,s=e.Label,c=e.input,h=e.Input,_=e.Sprite,d=e.Color,m=e.instantiate,l=e.Button,f=e.Animation,u=e.UITransform,p=e.Vec3,g=e.Tween},function(e){I=e.gConfigData},function(e){y=e.EventMgr},function(e){v=e.UIStaticComp,P=e.ConsoleError},function(e){G=e.AudioMgr},function(e){O=e.default},function(e){b=e.LocalizationMgr}],execute:function(){var C;i._RF.push({},"2b6baeRUelKqJTbfpMzywjm","GameInOnePiecePanel",void 0);var S=o.ccclass,x=(o.property,[{textColor:"#ffffff",bgColor:"#4c80ff"},{textColor:"#ffffff",bgColor:"#7a70e9"},{textColor:"#ffffff",bgColor:"#fec411"},{textColor:"#ffffff",bgColor:"#50bf84"},{textColor:"#ffffff",bgColor:"#0059D1"},{textColor:"#ffffff",bgColor:"#ff9681"},{textColor:"#ffffff",bgColor:"#ff73b4"},{textColor:"#ffffff",bgColor:"#e1b5ff"},{textColor:"#ffffff",bgColor:"#fb9038"},{textColor:"#ffffff",bgColor:"#00bfe9"},{textColor:"#ffffff",bgColor:"#564478"},{textColor:"#ffffff",bgColor:"#ff5122"},{textColor:"#ffffff",bgColor:"#c75dd5"}]),B=e("PropInfo",[{name:"Switch",key_name:"jiaohuan",_func:"_onClickSwitchProp",asset:"GameInOnePiece/OneSwitch/spriteFrame",key_tips:"tip_jiaohuan"},{name:"Undo",key_name:"chexiao",_func:"_onClickUndoProp",asset:"GameInOnePiece/UndoIcon/spriteFrame"},{name:"Shuffle",key_name:"xipai",_func:"_onClickShuffleProp",asset:"GameInOnePiece/OneShuffle/spriteFrame"},{name:"Bomb",key_name:"zhadan",_func:"_onClickBombProp",asset:"GameInOnePiece/BombIcon/spriteFrame",key_tips:"tip_zhadan"}]),N=[{x:0,y:-1,Name:"Top"},{x:1,y:0,Name:"Right"},{x:-1,y:0,Name:"Left"},{x:0,y:1,Name:"Bot"}],w=[{x:-1,y:-1,Name:"TopLeft",CheckDirection:[0,2],OppositeDirName:"BotRight"},{x:1,y:-1,Name:"TopRight",CheckDirection:[0,1],OppositeDirName:"BotLeft"},{x:-1,y:1,Name:"BotLeft",CheckDirection:[3,2],OppositeDirName:"TopRight"},{x:1,y:1,Name:"BotRight",CheckDirection:[3,1],OppositeDirName:"TopLeft"}];e("GameInOnePiecePanel",S("GameInOnePiecePanel")(C=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=e.call.apply(e,[this].concat(i))||this).game_obj=null,t.m_GridNumNode=null,t.m_GridBGNode=null,t.m_select_cell_node=null,t.logic=null,t.m_touchLock=!1,t.m_use_special_prop=-1,t.m_touchStartIndex={x:-100,y:-100},t.m_lastIndex=null,t.m_cur_score_schedule={targetNumber:0,currentNumber:0,shouldRefresh:!1,duration:10,elapsedTime:0},t.m_best_score_schedule={targetNumber:500,currentNumber:0,shouldRefresh:!1,duration:10,elapsedTime:0},t.m_mapSize=null,t.m_blockSize=null,t.m_scollNumber={last_number:0,delta_add:-1,pass_time:0},t}t(i,e);var o=i.prototype;return o.Init=function(e,t){this.game_obj=e,this.logic=t,this.m_mapSize=I.GameInOnePiece.MapSize,this.m_blockSize=I.GameInOnePiece.BlockSize,this._initNode(),this._initScore(),this._initProp(),this._resigistEvent(),this._resigistTouchEvent(),this._createMapItem(),this._createConnerInfo();var n=this;this.getComponent(a).scheduleOnce((function(){n._updateConnectInfo()}),.05),y.getInstance().on("onUpdateProp",this._onUpdateProp,this),y.getInstance().on("onFinishGuide",this._onFinishGuide,this)},o.OnRestartGame=function(){for(var e=0;e<this.m_mapSize.height;e++)for(var t=0;t<this.m_mapSize.width;t++){var n=new r(t,e),i=this._findItem(this.m_GridNumNode,n);this._updateItem(i,n);var o=this._findItem(this.m_GridBGNode,n);this._updateBG(o,n)}this.m_touchLock=!1,v.findObjByPath(this.game_obj,"ScoreNode/Label").getComponent(s).string="0",this._initScore(),this._updateConnectInfo(),this._updatePropNumber(1)},o.onDestroy=function(){console.log("onDestroyGameInOnePiecePanel ... "),c.off(h.EventType.TOUCH_START,this.onTouchStart,this),c.off(h.EventType.TOUCH_END,this.onTouchEnd,this),c.off(h.EventType.TOUCH_MOVE,this.onTouchMove,this)},o._onUpdateProp=function(e){this._updatePropNumber(e)},o._onFinishGuide=function(){this.touch_lock=!1},o.update=function(e){this._scrollScoreNumber(e),this._scrollBestScore(e)},o.easeOutQuart=function(e){return 1-Math.pow(1-e,4)},o._scrollScore=function(e,t,n){if(t.shouldRefresh&&t.currentNumber!==t.targetNumber){t.elapsedTime+=n;var i=Math.min(t.elapsedTime/t.duration,1),o=this.easeOutQuart(i),a=t.targetNumber-t.currentNumber;t.currentNumber=t.currentNumber+a*o,e.getComponent(s).string=Math.round(t.currentNumber).toString()}},o._scrollBestScore=function(e){var t=v.findObjByPath(this.game_obj,"ScoreNode/BestScore");this._scrollScore(t,this.m_best_score_schedule,e)},o._scrollScoreNumber=function(e){var t=v.findObjByPath(this.game_obj,"ScoreNode/Label");this._scrollScore(t,this.m_cur_score_schedule,e)},o._initNode=function(){this.m_GridNumNode=v.findObjByPath(this.game_obj,"GridNumNode"),this.m_GridBGNode=v.findObjByPath(this.game_obj,"GridBGNode"),this.m_select_cell_node=v.findObjByPath(this.game_obj,"SelectCellNode/SelectCell"),this._updateSelectCell(!1)},o._initScore=function(){this.m_best_score_schedule.currentNumber=0,this.m_cur_score_schedule.currentNumber=0,this._updateScore()},o._updateSelectCell=function(e,t){if(void 0===t&&(t=null),this.m_select_cell_node.active=e,!0===e){var n=v.GetMapPosByIndex(t,this.m_blockSize,this.m_mapSize);this.m_select_cell_node.position=n;var i=this.logic.GetGridInfoByIndex(t);this.m_select_cell_node.getComponent(_).color=new d(this._getColorString(i))}},o._updatePropNumber=function(e){var t=v.findObjByPath(this.game_obj,"PropNode/Layout"),n=v.findObjByPath(t,B[e].name),i=v.findObjByPath(n,"CountNode/HasProp"),o=v.findObjByPath(n,"CountNode/HasProp/Num"),a=v.findObjByPath(n,"CountNode/NotProp"),r=this.logic.GetPropCountByIndex(e);o.getComponent(s).string=r+"",a.active=0===r,i.active=0!==r,v.findObjByPath(n,"Btn/DisabledSprite").active=1===e&&!this.logic.can_undo},o._initProp=function(){var e=v.findObjByPath(this.game_obj,"PropNode"),t=v.findObjByPath(e,"Layout"),n=v.findObjByPath(t,"demo");n.active=!1;for(var i=0;i<B.length;++i){var o=m(n),a=v.findObjByPath(o,"CH_Name"),c=v.findObjByPath(o,"Btn");o.active=!0,o.name=B[i].name;var h=b.getInstance().getLocalizedstring("props_"+B[i].key_name);a.getComponent(s).string=h;var d=v.RegisterOneEvent("GameInOnePiecePanel",this.game_obj,B[i]._func);c.getComponent(l).clickEvents.push(d);var f=O.getInstance().getAsset("Sprite",B[i].asset);c.getComponent(_).spriteFrame=f,v.findObjByPath(o,"Btn/DisabledSprite").getComponent(_).spriteFrame=f,t.addChild(o),this._updatePropNumber(i)}this.m_use_special_prop=-1,this.m_lastIndex=new r(-1,-1)},o._updateScore=function(){this.m_best_score_schedule.targetNumber=this.logic.best_score,this.m_best_score_schedule.currentNumber!=this.m_best_score_schedule.targetNumber&&(this.m_best_score_schedule.shouldRefresh=!0,this.m_best_score_schedule.elapsedTime=0),this.m_cur_score_schedule.targetNumber=this.logic.current_score,this.m_cur_score_schedule.currentNumber!=this.m_cur_score_schedule.targetNumber&&(this.m_cur_score_schedule.shouldRefresh=!0,this.m_cur_score_schedule.elapsedTime=0)},o._getColorString=function(e){var t=(Math.abs(e)-1)%x.length;return x[t].bgColor},o._getNumShowLabelByIndex=function(e){var t=this.logic.GetGridInfoByIndex(e);if(t<=9)return Math.pow(2,t)+"";var n=["K","M","G","T","P","Z"],i=Math.floor((t-9-1)/10);return(t=Math.pow(2,(t-9-1)%10))+n[i>=n.length?n.length-1:i]},o._updateBG=function(e,t){var n=v.GetMapPosByIndex(t,this.m_blockSize,this.m_mapSize),i=v.findObjByPath(e,"BG"),o=Math.abs(this.logic.GetGridInfoByIndex(t));i.getComponent(_).color=new d(this._getColorString(o)),e.active=!0,e.name="Grid_"+t.y+"_"+t.x,e.position=n},o._updateItem=function(e,t){var n=v.GetMapPosByIndex(t,this.m_blockSize,this.m_mapSize),i=v.findObjByPath(e,"Num"),o=e.getChildByName("Magnet");e.active=!0,e.name="Grid_"+t.y+"_"+t.x;var a=this.logic.GetGridInfoByIndex(t);a>=0&&(i.getComponent(s).string=this._getNumShowLabelByIndex(t)),null!=o&&(o.active=a<0),i.active=a>=0,e.position=n},o._activeTopInfo=function(e){var t=v.findObjByPath(this.game_obj,"PauseBtn"),n=v.findObjByPath(this.game_obj,"ScoreNode");t.active=n.active=e},o._createMapItem=function(){console.log("_createMapItem");for(var e=v.findObjByPath(this.m_GridNumNode,"OneItem"),t=v.findObjByPath(this.m_GridBGNode,"OneBGItem"),n=0;n<this.m_mapSize.height;++n)for(var i=0;i<this.m_mapSize.width;++i){var o=new r(i,n),a=m(e);this._updateItem(a,o);var s=m(t);this._updateBG(s,o),this.m_GridNumNode.addChild(a),this.m_GridBGNode.addChild(s)}},o._createConnerInfo=function(){for(var e=v.findObjByPath(this.game_obj,"ConnectNode"),t=v.findObjByPath(e,"demo"),n=0;n<this.m_mapSize.height;++n)for(var i=0;i<this.m_mapSize.width;i++){var o=m(t),a={x:i,y:n},r=v.GetMapPosByIndex(a,this.m_blockSize,this.m_mapSize);o.position=r,o.name="Grid_"+a.y+"_"+a.x,e.addChild(o),o.active=!0}},o._checkIndexIsInGrid=function(e){return e.x>=0&&e.x<this.m_mapSize.width&&e.y>=0&&e.y<this.m_mapSize.height},o._unactiveOneGridConnect=function(e){for(var t=v.findObjByPath(this.game_obj,"ConnectNode"),n=this._findItem(t,e).children,i=0;i<n.length;++i)n[i].active=!1},o._updateOneGridConnect=function(e,t){var n=this;void 0===t&&(t=!0);for(var i=v.findObjByPath(this.game_obj,"ConnectNode"),o=this._findItem(i,e),a=!1,s=this.logic.GetGridInfoByIndex(e),c=0;c<N.length/2;++c){var h=new r(e.x+N[c].x,e.y+N[c].y),m=!1,l=v.findObjByPath(o,N[c].Name);if(this._checkIndexIsInGrid(h))m=this.logic.GetGridInfoByIndex(h)==s;else m=!1;var u=l.active;if(m&&(l.getComponent(_).color=new d(this._getColorString(s))),l.active=m,m&&!u)l.getComponent(f).play("ConnectLarge"),a=!0}for(var p=function(){var t=new r(e.x+w[I].x,e.y+w[I].y),i=w[I].CheckDirection[0],a=w[I].CheckDirection[1],c=new r(e.x+N[i].x,e.y+N[i].y),h=new r(e.x+N[a].x,e.y+N[a].y),m=!1,l=v.findObjByPath(o,w[I].Name);if(n._checkIndexIsInGrid(t)){var f=n.logic.GetGridInfoByIndex(t),u=n.logic.GetGridInfoByIndex(c),p=n.logic.GetGridInfoByIndex(h);if(m=u===s&&p===s&&f!==s,1===I){var y=v.findObjByPath(o,"Cranny");if(y.active=u===s&&p===s&&f===s,y.active)y.getComponent(_).color=new d(n._getColorString(s)),new g(l).delay(.2).call((function(){l.active=!0})).start()}}else m=!1;(l.active=m,m)&&(l.getComponent(_).color=new d(n._getColorString(s)),new g(l).delay(.2).call((function(){l.active=!0})).start())},I=0;I<w.length;++I)p();if(1==t){for(var y=0;y<N.length;++y){var P=N[y],G=new r(e.x+P.x,e.y+P.y);this._checkIndexIsInGrid(G)&&(a=this._updateOneGridConnect(G,!1)||a)}for(var O=0;O<w.length;++O){var b=w[O],C=new r(e.x+b.x,e.y+b.y);this._checkIndexIsInGrid(C)&&(a=this._updateOneGridConnect(C,!1)||a)}}return a},o._updateConnectInfo=function(){for(var e=this.m_mapSize.height-1;e>=0;--e)for(var t=0;t<this.m_mapSize.width;t++){var n=new r(t,e);this._updateOneGridConnect(n)}},o._clearOneConnectInfo=function(e,t){for(var n=v.findObjByPath(this.game_obj,"ConnectNode"),i=this._findItem(n,e),o=0;o<N.length/2;++o){v.findObjByPath(i,N[o].Name).active=!1}if(e.x>0){var a={x:e.x-1,y:e.y},s=this._findItem(n,a),c=v.findObjByPath(s,N[1].Name),h=v.findObjByPath(s,"TopRight"),m=v.findObjByPath(s,"BotRight");c.active=h.active=m.active=!1,v.findObjByPath(s,"Cranny").active=!1}if(e.x<this.m_mapSize.width-1){var l={x:e.x+1,y:e.y},f=this._findItem(n,l),u=v.findObjByPath(f,"TopLeft"),p=v.findObjByPath(f,"BotLeft");u.active=p.active=!1}if(e.y>0){var g={x:e.x,y:e.y-1},I=this._findItem(n,g),y=v.findObjByPath(I,"BotRight"),P=v.findObjByPath(I,"BotLeft");y.active=P.active=!1}if(e.y<this.m_mapSize.height-1){var G={x:e.x,y:e.y+1},O=this._findItem(n,G),b=v.findObjByPath(O,N[0].Name),C=v.findObjByPath(O,"TopRight"),S=v.findObjByPath(O,"TopLeft");b.active=C.active=S.active=!1,v.findObjByPath(O,"Cranny").active=!1}for(var x=0;x<w.length;++x){var B=v.findObjByPath(i,w[x].Name),k=new r(e.x+w[x].x,e.y+w[x].y);if(this._checkIndexIsInGrid(k)){var j=this._findItem(n,k),M=v.findObjByPath(j,w[x].OppositeDirName),T=w[x].CheckDirection[0],z=w[x].CheckDirection[1],L=new r(e.x+N[T].x,e.y+N[T].y),A=new r(e.x+N[z].x,e.y+N[z].y),U=(this.logic.GetGridInfoByIndex(e),this.logic.GetGridInfoByIndex(k)),R=this.logic.GetGridInfoByIndex(L),E=this.logic.GetGridInfoByIndex(A);B.active=!1;var D=this.logic.GetGridIsSelectByIndex(e),H=this.logic.GetGridIsSelectByIndex(e);if(M.active=R===U&&E===U&&!H&&D,1==M.active&&(M.getComponent(_).color=new d(this._getColorString(U))),2===x)v.findObjByPath(j,"Cranny").active=!1}}v.findObjByPath(i,"Cranny").active=!1},o._clearAllConnectInfo=function(){for(var e=this.m_mapSize.height-1;e>=0;--e)for(var t=0;t<this.m_mapSize.width;t++){var n=new r(t,e);this._clearOneConnectInfo(n,!0)}},o._findItem=function(e,t){var n=v.findObjByPath(e,"Grid_"+t.y+"_"+t.x);return P(null!=n,"_findItem"),n},o._resigistEvent=function(){v.findObjByPath(this.game_obj,"PauseBtn").on(l.EventType.CLICK,this._onClickPauseBtn,this)},o._resigistTouchEvent=function(){c.on(h.EventType.TOUCH_START,this.onTouchStart,this),c.on(h.EventType.TOUCH_END,this.onTouchEnd,this),c.on(h.EventType.TOUCH_MOVE,this.onTouchMove,this)},o.ConverPosToIndex=function(e){var t=this.m_GridNumNode.getComponent(u).convertToNodeSpaceAR(new p(e.x,e.y,0)),n=v.GetIndexByTouchPos(t,this.m_blockSize,this.m_mapSize);return new r(n.x,n.y)},o._hasSelectOneSwitchItem=function(){return!(-1==this.m_lastIndex.x||-1==this.m_lastIndex.y)},o._onSwapTwoItem=function(e,t){for(var n=new Array,i=new Array,o=[[e,t],[t,e]],r=0,s=0;s<o.length;s++){var c=o[s],h=c[0],_=c[1],d=this._findItem(this.m_GridNumNode,h),m=this._findItem(this.m_GridBGNode,h),l=Math.floor(1100*I.GameInOnePiece.shuffle_times),f=Math.floor(900*I.GameInOnePiece.shuffle_times),u=Math.random()*(l-f)/1e3;r=Math.max(r,u),this._moveOneItemToPos(h,_,u),n.push(d),i.push(m)}for(var p=0;p<o.length;++p){var g=o[p][1];n[p].name="Grid_"+g.y+"_"+g.x,i[p].name=n[p].name}var y=this,v=e.clone(),P=t.clone();this.getComponent(a).scheduleOnce((function(){y._updateOneGridConnect(v),y._updateOneGridConnect(P)}),r)},o._onUseSpecialProp=function(e){if(3===this.m_use_special_prop){this.logic.OnUseBombProp(e),this._removeOneItem(e),G.getInstance().PlayOneShot("InOnePieceSounds/BombAction"),G.getInstance().VibrateLong();var t=this;this.getComponent(a).scheduleOnce((function(){t._createNewGrid()}),I.GameInOnePiece.move_times),this._updatePropNumber(this.m_use_special_prop),this.m_use_special_prop=-1,this._seleceSpecialProp("Bomb",!0)}else 0===this.m_use_special_prop?this._hasSelectOneSwitchItem()?this.m_lastIndex.strictEquals(e)?(this.m_lastIndex.x=this.m_lastIndex.y=-1,this._updateOneGridConnect(e),this.m_use_special_prop=-1,this._seleceSpecialProp("Bomb",!0),this._updateSelectCell(!1)):(this._clearOneConnectInfo(e),this.logic.OnUseSwitchProp(e,this.m_lastIndex),this._onSwapTwoItem(e,this.m_lastIndex),this.m_lastIndex.x=this.m_lastIndex.y=-1,this._updatePropNumber(this.m_use_special_prop),this.m_use_special_prop=-1,this._seleceSpecialProp("Bomb",!0),G.getInstance().PlayOneShot("InOnePieceSounds/SwitchAction"),G.getInstance().VibrateShort("medium"),this._updateSelectCell(!1)):(this.m_lastIndex=e,this._clearOneConnectInfo(e),G.getInstance().PlayOneShot("InOnePieceSounds/SwitchFistTilePicked"),this._updateSelectCell(!0,e)):console.error("错误使用道具")},o._seleceSpecialProp=function(e,t){void 0===t&&(t=!1);for(var n=v.findObjByPath(this.game_obj,"PropNode/Layout"),i=v.findObjByPath(this.game_obj,"PropNode/PropTips"),o=0;o<B.length;o++){var a=B[o];if(e!=a.name||t){var r=v.findObjByPath(n,a.name),c=v.findObjByPath(r,"Btn"),h=v.findObjByPath(r,"CH_Name"),_=v.findObjByPath(r,"CountNode");c.active=t,_.active=t,h.active=t}else i.getComponent(s).string=b.getInstance().getLocalizedstring(a.key_tips)}i.active=!t,this._activeTopInfo(t)},o._onClickPauseBtn=function(){console.log("_onClickPauseBtn ... "),G.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),this.m_touchLock||y.getInstance().emit("onPauseGame")},o._onCreateAddReward=function(e){y.getInstance().emit("onRewardProp",[e])},o._onClickSwitchProp=function(){console.log("_onClickSwitchProp ... "),G.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),this.m_touchLock||(0!==this.logic.GetPropCountByIndex(0)?(this._seleceSpecialProp("Switch",this.is_use_special_prop),-1!==this.m_lastIndex.x&&-1!==this.m_lastIndex.y&&this._updateOneGridConnect(this.m_lastIndex),this._updateSelectCell(!1),this.m_lastIndex.x=this.m_lastIndex.y=-1,this.m_use_special_prop=-1===this.m_use_special_prop?0:-1):this._onCreateAddReward(0))},o._updateAllGrid=function(){for(var e=0;e<this.m_mapSize.height;++e)for(var t=0;t<this.m_mapSize.width;t++){var n=new r(t,e),i=this._findItem(this.m_GridNumNode,n),o=this._findItem(this.m_GridBGNode,n);this._clearOneConnectInfo(n),this._updateBG(o,n),this._updateItem(i,n)}this._updateConnectInfo()},o._onClickUndoProp=function(){if(console.log("_onClickUndoProp ... "),G.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),!this.m_touchLock)if(0!==this.logic.GetPropCountByIndex(1)){G.getInstance().PlayOneShot("InOnePieceSounds/UndoAction"),G.getInstance().VibrateShort("heavy");var e=this.logic.OnUseUndoProp();this._updatePropNumber(1),0!==e.length&&this._updateAllGrid()}else this._onCreateAddReward(1)},o._moveOneItemToPos=function(e,t,n){var i=this._findItem(this.m_GridNumNode,e),o=this._findItem(this.m_GridBGNode,e),a=v.GetMapPosByIndex(t,this.m_blockSize,this.m_mapSize),r=v.GetMapPosByIndex(t,this.m_blockSize,this.m_mapSize);new g(i).to(n,{position:a}).start(),new g(o).to(n,{position:r}).start()},o._removeOneItem=function(e){var t=this._findItem(this.m_GridNumNode,e),n=this._findItem(this.m_GridBGNode,e);t.parent=this._findUnactiveNode(t.parent),n.parent=this._findUnactiveNode(n.parent),this._clearOneConnectInfo(e)},o._onClickShuffleProp=function(){if(G.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),!this.m_touchLock)if(0!==this.logic.GetPropCountByIndex(2)){var e=this.logic.OnUseShuffleProp();if(0!==e.length){G.getInstance().PlayOneShot("InOnePieceSounds/ShuffleAction"),G.getInstance().VibrateShort("heavy"),this.m_touchLock=!0;for(var t=new Array,n=new Array,i=0,o=0;o<e.length;o++){var r=e[o],s=r.new_index,c=r.old_index,h=this._findItem(this.m_GridNumNode,s),_=this._findItem(this.m_GridBGNode,s),d=Math.floor(1200*I.GameInOnePiece.shuffle_times),m=Math.floor(800*I.GameInOnePiece.shuffle_times),l=Math.random()*(d-m)/1e3;this._moveOneItemToPos(s,c,l),i=Math.max(i,l),t.push(h),n.push(_)}for(var f=0;f<e.length;++f){var u=e[f].old_index;t[f].name="Grid_"+u.y+"_"+u.x,n[f].name=t[f].name}this._updatePropNumber(2),this._clearAllConnectInfo();var p=this;this.getComponent(a).scheduleOnce((function(){p._updateConnectInfo(),p.m_touchLock=!1}),i)}}else this._onCreateAddReward(2)},o._onClickBombProp=function(){console.log("_onClickBombProp ... "),G.getInstance().PlayOneShot("InOnePieceSounds/click_effect"),0!==this.logic.GetPropCountByIndex(3)?(this._seleceSpecialProp("Bomb",this.is_use_special_prop),this.m_use_special_prop=-1===this.m_use_special_prop?3:-1):this._onCreateAddReward(3)},o.onTouchStart=function(e){if(!this.m_touchLock){var t=e.getUILocation(),n=this.ConverPosToIndex(t);this.m_touchStartIndex={x:n.x,y:n.y}}},o.onTouchEnd=function(e){if(!this.m_touchLock){var t=e.getUILocation(),n=this.ConverPosToIndex(t);if(n.x>=0&&n.y>=0&&n.x==this.m_touchStartIndex.x&&n.y==this.m_touchStartIndex.y){if(this.is_use_special_prop)return void this._onUseSpecialProp(n);var i=new r(n.x,n.y),o=this.logic.CheckIndexIsMagnet(i),a=this.logic.onTouchOneGrid(i);a.canMerge&&(this.m_touchLock=!0,o?this._mergeMagnet(i,a.mergeList):this._mergeInOnePiece(i,a.mergeList))}}},o.onTouchMove=function(e){},o._findUnactiveNode=function(e){return v.findObjByPath(e,"UnactiveNode")},o._mergeMagnet=function(e,t){var n=this;G.getInstance().PlayOneShot("InOnePieceSounds/MagnetAction"),G.getInstance().VibrateLong();for(var i=this,o=function(){var o=t[r].cur_index,a=n._findItem(n.m_GridNumNode,o),s=n._findItem(n.m_GridBGNode,o),c=new g(a),h=new g(s);if(e.strictEquals(o))c.delay(I.GameInOnePiece.magnet_max_times+1).call((function(){i._updateItem(a,o)})).start(),h.delay(I.GameInOnePiece.magnet_max_times+1).call((function(){i._updateBG(s,o)})).start(),a.getComponent(f).play("MagnetShake");else{var _=v.GetMapPosByIndex(e,n.m_blockSize,n.m_mapSize),d=Math.floor(Math.random()*(I.GameInOnePiece.magnet_max_times-I.GameInOnePiece.magnet_min_times)*100)/100+I.GameInOnePiece.magnet_min_times;c.delay(1).to(d,{position:_}).call((function(){a.parent=i._findUnactiveNode(a.parent)})).start(),h.delay(1).to(d,{position:_}).call((function(){s.parent=i._findUnactiveNode(s.parent)})).start(),a.getComponent(f).play("MagnetBeAttract"),s.getComponent(f).play("MagnetBeAttract")}n._clearOneConnectInfo(o)},r=0;r<t.length;r++)o();this.getComponent(a).scheduleOnce((function(){i._createNewGrid()}),I.GameInOnePiece.magnet_max_times+1.1),this._updateScore()},o._mergeInOnePiece=function(e,t){var n=this,i=0,o=this;G.getInstance().PlayOneShot("InOnePieceSounds/merge_effect"),G.getInstance().VibrateShort("medium");for(var r=function(){var a=t[s].cur_index,r=t[s].parent_index,c=n._findItem(n.m_GridNumNode,a),h=n._findItem(n.m_GridBGNode,a),_=v.GetMapPosByIndex(r,n.m_blockSize,n.m_mapSize),d=t[s].order;i=Math.max(i,d);var m=new g(c),l=new g(h);e.strictEquals(a)?(m.delay(I.GameInOnePiece.move_times*d).call((function(){o._updateItem(c,a)})).start(),l.delay(I.GameInOnePiece.move_times*d).call((function(){o._updateBG(h,a)})).start()):(m.delay(I.GameInOnePiece.move_times*d).call((function(){o._clearOneConnectInfo(a,!0)})).to(I.GameInOnePiece.move_times,{position:_}).call((function(){c.parent=o._findUnactiveNode(c.parent)})).start(),l.delay(I.GameInOnePiece.move_times*d).to(I.GameInOnePiece.move_times,{position:_}).call((function(){h.parent=o._findUnactiveNode(h.parent)})).start())},s=0;s<t.length;s++)r();this.getComponent(a).scheduleOnce((function(){o._createNewGrid()}),I.GameInOnePiece.move_times*(i+1)),this._updateScore()},o._getCreateCountArray=function(e){for(var t=new Array,n=(new Array,0);n<this.m_mapSize.width;n++)t.push(0);for(var i=0;i<e.length;i++){t[e[i].index.x]+=1}return t},o._setAllItemBecomeGray=function(){for(var e=this,t=this.m_mapSize.height,n=t-1;n>=0;n--)for(var i=function(){var i=new r(o,n),a=e._findItem(e.m_GridBGNode,i),s=v.findObjByPath(a,"BG");new g(s).delay((t-n)*I.GameInOnePiece.become_gray_delay_times).call((function(){s.getComponent(_).color=new d("#979797")})).start()},o=0;o<this.m_mapSize.width;o++)i();this.getComponent(a).scheduleOnce((function(){y.getInstance().emit("onGameOver"),G.getInstance().PlayOneShot("InOnePieceSounds/gameover_effect")}),(t+1)*I.GameInOnePiece.become_gray_delay_times)},o._onCheckGameOver=function(){this.logic.onCheckGameOver()?this._setAllItemBecomeGray():this.m_touchLock=!1},o._checkHasMaxNumber=function(){var e=this,t=this.logic.onRemoveTooMinGrid();if(0!==t.length){for(var n=this,i=0,o=function(){var o=t[r],a=e._findItem(e.m_GridBGNode,o);new g(a).delay(.1*(t.length-i)).call((function(){n._removeOneItem(o)})).start(),i++},r=0;r<t.length;r++)o();this.getComponent(a).scheduleOnce((function(){n._createNewGrid()}),.1*(t.length+1))}else this._onCheckGameOver()},o._createNewGrid=function(){for(var e=this,t=this.logic.onCreateNewGrid(),n=t.MoveArray.length,i=new Array,o=new Array,r=this,s=function(){var n=t.MoveArray[c].old_index,a=t.MoveArray[c].new_index,s=v.GetMapPosByIndex(a,e.m_blockSize,e.m_mapSize),h=e._findItem(e.m_GridNumNode,n),_=e._findItem(e.m_GridBGNode,n),d=I.GameInOnePiece.fall_times*(a.y-n.y),m=new g(h),l=new g(_);m.call((function(){r._clearOneConnectInfo(n,!0)})).to(d,{position:s}).start(),l.to(d,{position:s}).start(),i.push(h),o.push(_)},c=0;c<n;++c)s();for(var h=0;h<n;++h){var _=t.MoveArray[h].new_index;i[h].name="Grid_"+_.y+"_"+_.x,o[h].name=i[h].name}var d=t.NewGridArray.length,m=this._findUnactiveNode(this.m_GridNumNode).children,l=this._findUnactiveNode(this.m_GridBGNode).children;P(m.length==d,m.length,d),P(l.length==d,l.length,d);for(var f=0,u=this._getCreateCountArray(t.NewGridArray),y=0;y<d;++y){var G=t.NewGridArray[y].index,O=m[0],b=l[0];O.parent=this.m_GridNumNode,b.parent=this.m_GridBGNode,this._unactiveOneGridConnect(G),this._updateItem(O,G),this._updateBG(b,G);var C=v.GetMapPosByIndex({y:0,x:G.x},this.m_blockSize,this.m_mapSize);O.position=new p(C.x,C.y+I.GameInOnePiece.BlockSize.height/2,0),b.position=O.position;var S=v.GetMapPosByIndex(G,this.m_blockSize,this.m_mapSize),x=I.GameInOnePiece.fall_times*(G.y+1);O.setScale(1,0),b.setScale(1,0);var B=(u[G.x]-G.y)*I.GameInOnePiece.fall_times,N=new g(O),w=new g(b),k=new g(O);k.to(I.GameInOnePiece.fall_times,{scale:new p(1,1,1)});var j=new g(O);j.to(x,{position:S});var M=new g(O);M.to(I.GameInOnePiece.fall_times,{scale:new p(1,1,1)});var T=new g(O);T.to(x,{position:S}),N.delay(B).parallel(k,j).start(),w.delay(B).parallel(M,T).start(),f=Math.max(x+I.GameInOnePiece.fall_times,f),m=this._findUnactiveNode(this.m_GridNumNode).children,l=this._findUnactiveNode(this.m_GridBGNode).children}this.getComponent(a).scheduleOnce((function(){r._updateConnectInfo(),r._checkHasMaxNumber()}),f),this._updatePropNumber(1)},n(i,[{key:"is_use_special_prop",get:function(){return!(-1===this.m_use_special_prop)}},{key:"touch_lock",set:function(e){this.m_touchLock=e}}]),i}(a))||C);i._RF.pop()}}}));

System.register("chunks:///_virtual/GameLaunch.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameApp.ts","./EventMgr.ts","./DataMgr.ts","./AudioMgr.ts","./SaveData.ts","./SDKMgr.ts","./UIStaticComp.ts","./YolkStudio.ts"],(function(t){var n,o,a,e,i,c,r,u,s,d,l,p;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,a=t._decorator,e=t.Component},function(t){i=t.GameApp},function(t){c=t.EventMgr},function(t){r=t.DataMgr},function(t){u=t.AudioMgr},function(t){s=t.SaveData},function(t){d=t.SDKMgr},function(t){l=t.UIStaticComp},function(t){p=t.YolkStudio}],execute:function(){var f,m;o._RF.push({},"e4a4fhS7HtEqoJjOLK5LZyK","GameLaunch",void 0);var h=a.ccclass;a.property,t("GameLaunch",h("GameLaunch")(((m=function(t){function o(){return t.apply(this,arguments)||this}n(o,t);var a=o.prototype;return a.onLoad=function(){this.node.addComponent(c).init(),this.node.addComponent(i),r.getInstance().init(),this.node.addComponent(r),this.node.addComponent(u).init(),d.getInstance().init()},a.start=function(){console.log("start"),this._clearOldData(),this._initYolkStudio(),i.getInstance().GameStart()},a._initYolkStudio=function(){var t=l.findObjByPath(this.node,"YolkStudio");t.addComponent(p).Init(t)},a._clearOldData=function(){var t=Date.now(),n=Number(s.OnLoadData("GameInOnePiece","SaveDate"));console.log("str_date = ",t),n<1707466727780&&(localStorage.clear(),s.OnSaveData("GameInOnePiece","SaveDate",t))},o}(e)).instance=null,f=m))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/GameMergeDice.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameBase.ts","./ResMgr.ts","./EventMgr.ts","./GameMergeDiceLogic.ts","./GameMergeDicePanel.ts","./CommonGamePausePanel.ts","./CommonGameOverPanel.ts"],(function(e){var a,n,t,s,m,o,i,r,l,P,c,g,u;return{setters:[function(e){a=e.inheritsLoose},function(e){n=e.cclegacy,t=e._decorator,s=e.instantiate,m=e.Prefab,o=e.AudioClip},function(e){i=e.GameBase},function(e){r=e.default},function(e){l=e.EventMgr},function(e){P=e.GameMergeDiceLogic},function(e){c=e.GameMergeDicePanel},function(e){g=e.CommonGamePausePanel},function(e){u=e.CommonGameOverPanel}],execute:function(){var h;n._RF.push({},"3ee4cmhlI9MPb9LCCdOt09p","GameMergeDice",void 0);var _=t.ccclass;t.property,e("GameMergeDice",_("GameMergeDice")(h=function(e){function n(){for(var a,n=arguments.length,t=new Array(n),s=0;s<n;s++)t[s]=arguments[s];return(a=e.call.apply(e,[this].concat(t))||this).resPkg={GUI:{assetType:m,urls:["Prefabs/Common/CommonGamePausePanel","Prefabs/Common/CommonGameOverPanel","Prefabs/GameMergeDice/GameMergeDicePanel"]},Sounds:{assetType:o,urls:[]}},a.m_gamePanel=null,a.m_pausePanel=null,a.m_gameoverPanel=null,a.logic=null,a}a(n,e);var t=n.prototype;return t.Init=function(a){e.prototype.Init.call(this,a)},t._resigistEvent=function(){l.getInstance().on("onPauseGame",this._onCreatePausePanel,this),l.getInstance().on("onRestartGame",this._onRestartGame,this),l.getInstance().on("onGameOver",this._onGameOver,this)},t._unResigistEvent=function(){l.getInstance().off("onPauseGame",this._onCreatePausePanel,this),l.getInstance().off("onRestartGame",this._onRestartGame,this),l.getInstance().off("onGameOver",this._onGameOver,this)},t.EnterGame=function(){console.log("GameBase GameMergeDice..."),this.logic=new P,this._CreateGamePanel()},t._CreateGamePanel=function(){var e=r.getInstance().getAsset("GUI","Prefabs/GameMergeDice/GameMergeDicePanel");this.m_gamePanel=s(e),this.m_gamePanel.addComponent(c).Init(this.m_gamePanel,this.logic),this.game_obj.addChild(this.m_gamePanel)},t._onCreatePausePanel=function(){if(null==this.m_pausePanel){var e=r.getInstance().getAsset("GUI","Prefabs/Common/CommonGamePausePanel");this.m_pausePanel=s(e),this.m_pausePanel.addComponent(g).Init(this.m_pausePanel),this.game_obj.addChild(this.m_pausePanel)}else this.m_pausePanel.active=!0},t._onRestartGame=function(){this.m_pausePanel&&(this.m_pausePanel.active=!1),this.m_gameoverPanel&&(this.m_gameoverPanel.active=!1),this.logic.RestartGame(),this.m_gamePanel.getComponent(c).OnRestartGame()},t._onGameOver=function(){if(null==this.m_gameoverPanel){var e=r.getInstance().getAsset("GUI","Prefabs/Common/CommonGameOverPanel");this.m_gameoverPanel=s(e),this.m_gameoverPanel.addComponent(u).Init(this.m_gameoverPanel),this.game_obj.addChild(this.m_gameoverPanel)}else this.m_gameoverPanel.active=!0},t.OnEndGame=function(){e.prototype.OnEndGame.call(this),this.m_pausePanel&&(this.m_pausePanel.getComponent(g).onDestroy(),this.m_pausePanel.removeFromParent()),this.m_gameoverPanel&&(this.m_gameoverPanel.getComponent(u).onDestroy(),this.m_gameoverPanel.removeFromParent()),this.m_gamePanel.getComponent(c).onDestroy(),this.m_gamePanel.removeFromParent(),this.m_pausePanel=null,this.m_gamePanel=null},n}(i))||h);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameMergeDiceLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigData.ts","./EventMgr.ts","./Calculator.ts","./SaveData.ts"],(function(r){var e,t,a,n,i,s,h,c;return{setters:[function(r){e=r.createClass},function(r){t=r.cclegacy,a=r._decorator,n=r.Vec2},function(r){i=r.gConfigData},function(r){s=r.EventMgr},function(r){h=r.Calculator},function(r){c=r.SaveData}],execute:function(){t._RF.push({},"b2874tFYERG2p8EF1LMHyJ1","GameMergeDiceLogic",void 0);a.ccclass,a.property;var o=[{x:0,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:-1,y:-1},{x:1,y:-1},{x:-1,y:1},{x:1,y:1}];r("GameMergeDiceLogic",function(){function r(){this.mapWidth=0,this.mapHeight=0,this.mapArray=null,this.m_selectMapList=null,this.m_totalNum=null,this.m_currentBlockMap=null,this.m_max_create_number=2,this.m_game_name="GameMergeDice",this.mapWidth=i.GameMergeDice.MapSize.width,this.mapHeight=i.GameMergeDice.MapSize.height,this.m_totalNum=0,this.m_currentBlockMap={map_array:new Array,width:i.GameMergeDice.CurrentBlockSize.width,height:i.GameMergeDice.CurrentBlockSize.height},this._createNewCurrentBlockNumber(),this.mapArray=new Array,this._onCreateMapArray(),this.m_selectMapList=new Array,this._initMaxCreateNumber()}var t=r.prototype;return t._onCreateMapArray=function(){var r=c.OnLoadData(this.m_game_name,"map_array");console.log("load_data = ",r);for(var e=0;e<this.mapHeight;e++){for(var t=new Array,a=0;a<this.mapWidth;a++){var n={cur_index:{x:a,y:e},parent_index:{x:a,y:e},number:0,isSelect:!1};t.push(n)}this.mapArray.push(t)}},t._onSaveMapData=function(){for(var r=new Array,e=0;e<this.mapHeight;e++){for(var t=new Array,a=0;a<this.mapWidth;a++)t.push(this.mapArray[e][a].number);r.push(t)}c.OnSaveData(this.m_game_name,"map_array",r)},t._initMaxCreateNumber=function(){this.m_max_create_number=2},t.RestartGame=function(){for(var r=0;r<this.mapHeight;r++)for(var e=0;e<this.mapWidth;e++)this.mapArray[r][e].number=0,this.mapArray[r][e].isSelect=!1;this._initMaxCreateNumber(),this._createNewCurrentBlockNumber()},t.RotateCurrentBlock=function(r){this.current_block_height,this.current_block_width;var e=function(r){for(var e=r.length,t=r[0].length,a=[],n=[],i=0;i<t;i++)a[i]=[];for(var s=0;s<e;s++)for(var h=0;h<t;h++){var c={x:s,y:h},o={x:h,y:e-1-s};a[o.x][o.y]=r[c.x][c.y],n.push({old_index:c,new_index:o})}return[a,n]}(this.m_currentBlockMap.map_array),t=e[0],a=e[1];return this.m_currentBlockMap.map_array=t,a},t.getCreateNumber=function(){var r=this.m_max_create_number,e=Math.log2(r);e=Math.max(1,e);var t=Math.floor(Math.random()*e)+1;return Math.pow(2,t)},t._createNewCurrentBlockNumber=function(){var r=[40,20],e=h.RandomIndexByWeights(r)+1;this.m_currentBlockMap.map_array=new Array;for(var t=0;t<1;t++){for(var a=new Array,n=0;n<e;n++){var i=this.getCreateNumber();a.push(i)}this.m_currentBlockMap.map_array.push(a)}console.log("rGridNum = ",e),console.log("this.m_currentBlockMap. = ",this.m_currentBlockMap)},t.GetGridInfoByIndex=function(r){return console.assert(this.mapArray[r.y][r.x]),this.mapArray[r.y][r.x].number},t.GetCurrentBlockByIndex=function(r){return console.assert(r.x>=0&&r.x<this.m_currentBlockMap.width),console.assert(r.y>=0&&r.y<this.m_currentBlockMap.height),console.assert(r.x>=0&&r.x<this.m_currentBlockMap.width),this.m_currentBlockMap.map_array[r.y][r.x]},t.OnReleaseCurrentBlock=function(r){for(var e=this.OnCheckCurrentBlockCanRelease(r),t=0;t<e.length;t++){var a=e[t];this.mapArray[a.index.y][a.index.x].number=a.number}return e},t.OnCheckCurrentBlockCanRelease=function(r){for(var e=this.current_block_width,t=this.current_block_height,a=new Array,n=!0,i=0;i<t;i++){for(var s=0;s<e;s++){var h={x:r.x+s,y:r.y+i};if(!this._checkIndexIsInGrid(h)||0!==this.mapArray[h.y][h.x].number){a=new Array,n=!1;break}a.push({index:h,number:this.m_currentBlockMap.map_array[i][s]})}if(!n)break}return a},t.onCheckMerge=function(r){for(var e=0;e<r.length;e++){var t=r[e].index,a=this._findSameNumberGridDFS(t);if(a.length>=3){for(var i=0;i<a.length;i++){var s=a[i];s.x==t.x&&s.y==t.y?(this.mapArray[s.y][s.x].number*=2,this.m_max_create_number=Math.max(this.m_max_create_number,this.mapArray[s.y][s.x].number)):this.mapArray[s.y][s.x].number=0}return console.log("same_list222======= = ",a),console.log("same_list222======= = ",this.mapArray),this._cancalAllSelect(),{merge_array:a,merge_index:t}}this._cancalAllSelect()}return{merge_array:[],merge_index:new n(0,0)}},t.onCheckGameOver=function(){console.log("OnCheckGameOver ... ");for(var r=this.m_currentBlockMap.map_array[0].length,e=0;e<this.mapHeight;e++)for(var t=0;t<=this.mapWidth-r;t++){for(var a=!0,n=0;n<r;n++)if(0!==this.mapArray[e][t+n].number){a=!1;break}if(a)return!1}for(var i=0;i<=this.mapHeight-r;i++)for(var s=0;s<this.mapWidth;s++){for(var h=!0,c=0;c<r;c++)if(0!==this.mapArray[i+c][s].number){h=!1;break}if(h)return!1}return!0},t.onCreateCurrentBlock=function(){this._createNewCurrentBlockNumber()},t.onTouchOneGrid=function(r){var e=this._findSameNumberGridDFS(r);if(e.length<2)return console.log("不能点击"),this._cancalAllSelect(),{canMerge:!1,mergeList:[]};var t=this.mapArray[r.y][r.x].number*e.length;return s.getInstance().emit("onUpdateGameInOnePieceScore",[t]),this.mapArray[r.y][r.x].number*=2,this.mapArray[r.y][r.x].isSelect=!1,{canMerge:!0,mergeList:e}},t.onCancalTouch=function(){for(var r=0;r<this.m_selectMapList.length-1;r++){var e=this.m_selectMapList[r];this.mapArray[e.y][e.x].isSelect=!0}for(var t=0;t<1e4;++t)if(this.m_totalNum>=Math.pow(2,t)&&this.m_totalNum<Math.pow(2,t+1)){var a=this.m_selectMapList.length-1;this.mapArray[this.m_selectMapList[a].y][this.m_selectMapList[a].x].number=Math.pow(2,t);break}this.m_totalNum=0,this.m_selectMapList=new Array},t.onCreateNewGrid=function(){for(var r=new Array,e=new Array,t=this.mapHeight-1;t>=0;--t)for(var a=0;a<this.mapWidth;a++)if(this.mapArray[t][a].isSelect){for(var n=!0,i=t-1;i>=0;--i)if(0==this.mapArray[i][a].isSelect){n=!1,this.mapArray[i][a].isSelect=!0;var s=this.mapArray[i][a].number,h={y:i,x:a},c={y:t,x:a};this.mapArray[t][a].number=s,this.mapArray[t][a].isSelect=!1,r.push({old_index:h,new_index:c});break}if(n){var o=this.getCreateNumber();this.mapArray[t][a].number=o,this.mapArray[t][a].isSelect=!1,e.push({index:{y:t,x:a},number:o})}}return console.log("onCreateNewGrid , MoveArray = ",r),console.log("onCreateNewGrid , NewGridArray = ",e),{MoveArray:r,NewGridArray:e}},t._findSameNumberGridDFS=function(r){var e=this._findItem(r).number;if(0==e)return[];var t=new Array,a=new Array;for(t.push(r),a.push(r);0!=t.length;){var i=t[0];this._findItem(i).isSelect=!0;for(var s=0;s<4;++s){var h=new n(i.x+o[s].x,i.y+o[s].y);if(this._checkIndexIsInGrid(h)){var c=this._findItem(h);c.isSelect||c.number!=e||(c.isSelect=!0,a.push(h),t.push(h))}}t.splice(0,1)}return a},t._checkGridNumCanAddToList=function(r,e){return!(r<e)&&(r==e||this.m_totalNum>=r&&r==2*e)},t._checkIndexIsInGrid=function(r){return r.x>=0&&r.y>=0&&r.x<this.mapWidth&&r.y<this.mapHeight},t._findItem=function(r){return console.assert(0!=this._checkIndexIsInGrid(r)),this.mapArray[r.y][r.x]},t._checkIsInList=function(r,e){for(var t=this.m_selectMapList.length,a=-1,n=t-1;n>=0;--n)if(this._compareTwoIndexEqual(r,e[n])){a=t-1-n;break}return a},t._compareTwoIndexEqual=function(r,e){return r.x==e.x&&r.y==e.y},t._compareTwoIndexIsBorder=function(r,e){var t=Math.abs(r.x-e.x),a=Math.abs(r.y-e.y);return 1==t||1==a},t._cancalAllSelect=function(){for(var r=0;r<this.mapArray.length;r++)for(var e=0;e<this.mapArray[0].length;e++)this.mapArray[r][e].isSelect=!1},e(r,[{key:"total_num",get:function(){return this.m_totalNum}},{key:"select_map_list",get:function(){return this.m_selectMapList}},{key:"current_block_width",get:function(){return this.m_currentBlockMap.map_array[0].length}},{key:"current_block_height",get:function(){return this.m_currentBlockMap.map_array.length}}]),r}());t._RF.pop()}}}));

System.register("chunks:///_virtual/GameMergeDicePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ConfigData.ts","./EventMgr.ts","./LocalizationMgr.ts","./UIStaticComp.ts"],(function(e){var t,i,o,n,r,a,c,s,h,l,m,d,_,f,u,g,C,v,p,B;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,o=e._decorator,n=e.input,r=e.Input,a=e.Label,c=e.UITransform,s=e.Sprite,h=e.Color,l=e.instantiate,m=e.Animation,d=e.Button,_=e.Vec3,f=e.Vec2,u=e.Component,g=e.Tween},function(e){C=e.gConfigData},function(e){v=e.EventMgr},function(e){p=e.LocalizationMgr},function(e){B=e.UIStaticComp}],execute:function(){var y;i._RF.push({},"06dd0M9UfdGP6g1S8lMbjNs","GameMergeDicePanel",void 0);var G=o.ccclass,N=(o.property,{0:{textColor:"#ffffff",bgColor:"#4c80ff"},2:{textColor:"#ffffff",bgColor:"#4c80ff"},4:{textColor:"#ffffff",bgColor:"#6649d8"},8:{textColor:"#ffffff",bgColor:"#f8bf00"},16:{textColor:"#ffffff",bgColor:"#ff8925"},32:{textColor:"#ffffff",bgColor:"#fe5224"},64:{textColor:"#ffffff",bgColor:"#5ccd59"},128:{textColor:"#ffffff",bgColor:"#e34e55"},256:{textColor:"#ffffff",bgColor:"#5d66d3"},512:{textColor:"#ffffff",bgColor:"#34a371"},1024:{textColor:"#ffffff",bgColor:"#aa5ad7"},2048:{textColor:"#ffffff",bgColor:"#efc32e"},4096:{textColor:"#ffffff",bgColor:"#fd3d3e"},8192:{textColor:"#ffffff",bgColor:"#ff1e1f"},16384:{textColor:"#ffffff",bgColor:"#b984b0"},32768:{textColor:"#ffffff",bgColor:"#9f4d9f"},65536:{textColor:"#ffffff",bgColor:"#5d5bd6"}});e("GameMergeDicePanel",G("GameMergeDicePanel")(y=function(e){function i(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))||this).game_obj=null,t.m_GridNumNode=null,t.m_GridBGNode=null,t.m_CurrentBlockNode=null,t.m_CurrentBlock=null,t.m_CurrentBlockCenterNode=null,t.logic=null,t.m_touchLock=!1,t.m_lastIndex=null,t.is_touch_circle=!1,t.is_can_move_current_block=!1,t.m_mapSize=null,t.m_blockSize=null,t.m_scollNumber={last_number:0,delta_add:-1,pass_time:0},t}t(i,e);var o=i.prototype;return o.Init=function(e,t){this.game_obj=e,this.logic=t,this.m_mapSize=C.GameMergeDice.MapSize,this.m_blockSize=C.GameMergeDice.BlockSize,this._initNode(),this._resigistEvent(),this._resigistTouchEvent(),this._createMapGridNode(),this._createNewCurrentBlock(),console.log("LocalizationMgr",p.getInstance().getLocalizedstring("tip_zhadan"))},o.OnRestartGame=function(){for(var e=0;e<this.m_mapSize.height;e++)for(var t=0;t<this.m_mapSize.width;t++){var i={x:t,y:e},o=this.m_GridNumNode.getChildByName("Grid_"+i.y+"_"+i.x);null!=o&&(o.active=!1)}this._onCreateCurrentBlock()},o.onDestroy=function(){console.log("onDestroyGameMergeDicePanel ... "),n.off(r.EventType.TOUCH_START,this.onTouchStart,this),n.off(r.EventType.TOUCH_END,this.onTouchEnd,this),n.off(r.EventType.TOUCH_MOVE,this.onTouchMove,this)},o.update=function(e){this._scrollScoreNumber(e)},o._scrollScoreNumber=function(e){var t=B.findObjByPath(this.game_obj,"ScoreNode/Label"),i=Number(t.getComponent(a).string)||0;if(0==i)return this.m_scollNumber.pass_time=0,this.m_scollNumber.delta_add=-1,void(this.m_scollNumber.last_number=i);if(i>0)t.getComponent(a).string="0";else{this.m_scollNumber.pass_time+=e;var o=0;-1==this.m_scollNumber.delta_add?(o=(0-i)/.5,this.m_scollNumber.delta_add=o):o=this.m_scollNumber.delta_add,i=Math.floor(this.m_scollNumber.last_number+this.m_scollNumber.pass_time*o),i=Math.min(i,0),t.getComponent(a).string=i+""}},o._initNode=function(){this.m_GridNumNode=B.findObjByPath(this.game_obj,"GridNumNode"),this.m_GridBGNode=B.findObjByPath(this.game_obj,"GridBGNode"),this.m_CurrentBlockNode=B.findObjByPath(this.game_obj,"CurrentBlockNode"),this.m_CurrentBlock=B.findObjByPath(this.game_obj,"CurrentBlockNode/CurrentBlock"),this.m_CurrentBlockCenterNode=B.findObjByPath(this.game_obj,"CurrentBlockNode/bg");var e=B.findObjByPath(this.game_obj,"CurrentBlockNode/CurrentBlock");this.m_CurrentBlockCenterNode.getComponent(c).width=this.m_CurrentBlockCenterNode.getComponent(c).height=C.GameMergeDice.CurrentBlockTouchRadius,e.position=this.m_CurrentBlockCenterNode.position},o._updateBG=function(e,t){},o._getColorString=function(e){return N[e].bgColor},o._updateItem=function(e,t,i){var o=B.GetMapPosByIndex(t,this.m_blockSize,this.m_mapSize),n=B.findObjByPath(e,"Num"),r=B.findObjByPath(e,"BG"),c=B.findObjByPath(e,"Bomb"),l=i||this.logic.GetGridInfoByIndex(t);e.active=!0,c.active=l===C.GameMergeDice.Become_Bomb_Number,n.active=!c.active,e.name="Grid_"+t.y+"_"+t.x,r.getComponent(s).color=new h(this._getColorString(l)),n.getComponent(a).string=l+"",e.position=o},o._createMapGridNode=function(){for(var e=B.findObjByPath(this.game_obj,"MapGridNode"),t=B.findObjByPath(e,"demo"),i=0;i<this.m_mapSize.height;i++)for(var o=0;o<this.m_mapSize.width;o++){var n=l(t),r={x:o,y:i},a=B.GetMapPosByIndex(r,this.m_blockSize,this.m_mapSize);n.position=a,n.active=!0;var c=(i+o)%2;n.getComponent(s).color=new h(C.GameMergeDice.GridBGColor[c]),e.addChild(n)}},o._getCurrentBlockPos=function(e){var t={width:this.logic.current_block_width,height:this.logic.current_block_height};return B.GetMapPosByIndex(e,this.m_blockSize,t)},o._createNewCurrentBlock=function(){var e=B.findObjByPath(this.game_obj,"CurrentBlockNode/CurrentBlock"),t=B.findObjByPath(e,"demo");e.removeAllChildren(),e.addChild(t);for(var i=this.logic.current_block_width,o=this.logic.current_block_height,n=0;n<o;n++)for(var r=0;r<i;r++){var a=l(t),c={x:r,y:n},s=this.logic.GetCurrentBlockByIndex(c);a.active=!0,this._updateItem(a,c,s);var h=this._getCurrentBlockPos(c);a.position=h,e.addChild(a)}e.getComponent(m).play("NewCurrentBlock")},o._onPrviewItem=function(e){var t=this.m_GridNumNode.getChildByName("Grid_"+e.y+"_"+e.x);null==t&&(t=this._createOneItem(e)),t.active=!0;var i=B.findObjByPath(t,"PreviewBG"),o=B.findObjByPath(t,"Num"),n=B.findObjByPath(t,"BG");B.findObjByPath(t,"Bomb").active=o.active=n.active=!1,i.active=!0},o._onShowItem=function(e){var t=this._findItem(this.m_GridNumNode,e);t.active=!0;var i=B.findObjByPath(t,"PreviewBG"),o=B.findObjByPath(t,"Num"),n=B.findObjByPath(t,"BG");o.active=n.active=!0,i.active=!1,this._updateItem(t,e)},o._createOneItem=function(e){var t=B.findObjByPath(this.m_GridNumNode,"OneItem"),i=l(t);return this._updateItem(i,e),this.m_GridNumNode.addChild(i),i},o._createAllItem=function(){console.log("_createAllItem");for(var e=B.findObjByPath(this.m_GridNumNode,"OneItem"),t=0;t<this.m_mapSize.height;++t)for(var i=0;i<this.m_mapSize.width;++i){var o={x:i,y:t},n=l(e);this._updateItem(n,o),n.active=!1,this.m_GridNumNode.addChild(n)}},o._createConnerInfo=function(){for(var e=B.findObjByPath(this.game_obj,"ConnectNode"),t=B.findObjByPath(e,"demo"),i=0;i<this.m_mapSize.height;++i)for(var o=0;o<this.m_mapSize.width;o++){var n=l(t),r={x:o,y:i},a=B.GetMapPosByIndex(r,this.m_blockSize,this.m_mapSize);n.position=a,n.name="Grid_"+r.y+"_"+r.x,e.addChild(n),n.active=!0}},o._checkIndexIsInGrid=function(e){return e.x>=0&&e.x<this.m_mapSize.width&&e.y>=0&&e.y<this.m_mapSize.height},o._unactiveOneGridConnect=function(e){for(var t=B.findObjByPath(this.game_obj,"ConnectNode"),i=this._findItem(t,e).children,o=0;o<i.length;++o)i[o].active=!1},o._updateOneGridConnect=function(e){for(var t=B.findObjByPath(this.game_obj,"ConnectNode"),i=this._findItem(t,e),o=[{x:0,y:-1,Name:"Top"},{x:-1,y:0,Name:"Left"},{x:1,y:0,Name:"Right"},{x:0,y:1,Name:"Bot"}],n=[{x:-1,y:-1,Name:"TopLeft",CheckDirection:[0,1]},{x:1,y:-1,Name:"TopRight",CheckDirection:[0,2]},{x:-1,y:1,Name:"BotLeft",CheckDirection:[3,1]},{x:1,y:1,Name:"BotRight",CheckDirection:[3,2]}],r=this.logic.GetGridInfoByIndex(e),a=0;a<o.length;++a){var c={x:e.x+o[a].x,y:e.y+o[a].y},l=!1,m=B.findObjByPath(i,o[a].Name);if(this._checkIndexIsInGrid(c))l=this.logic.GetGridInfoByIndex(c)==r;else l=!1;m.active=l,l&&(m.getComponent(s).color=new h(this._getColorString(r)))}for(var d=0;d<n.length;++d){var _={x:e.x+n[d].x,y:e.y+n[d].y},f=n[d].CheckDirection[0],u=n[d].CheckDirection[1],g={x:e.x+o[f].x,y:e.y+o[f].y},C={x:e.x+o[u].x,y:e.y+o[u].y},v=!1,p=B.findObjByPath(i,n[d].Name);if(this._checkIndexIsInGrid(_)&&this._checkIndexIsInGrid(g)&&this._checkIndexIsInGrid(C)){this.logic.GetGridInfoByIndex(_);var y=this.logic.GetGridInfoByIndex(g),G=this.logic.GetGridInfoByIndex(C);v=y==r&&G==r}else v=!1;p.active=v,v&&(p.getComponent(s).color=new h(this._getColorString(r)))}},o._updateConnectInfo=function(){B.findObjByPath(this.game_obj,"ConnectNode");for(var e=0;e<this.m_mapSize.height;++e)for(var t=0;t<this.m_mapSize.width;t++){var i={x:t,y:e};this._updateOneGridConnect(i)}},o._findItem=function(e,t){var i=B.findObjByPath(e,"Grid_"+t.y+"_"+t.x);return console.assert(null!=i),i},o._resigistEvent=function(){B.findObjByPath(this.game_obj,"PauseBtn").on(d.EventType.CLICK,this._onClickPauseBtn,this)},o._resigistTouchEvent=function(){n.on(r.EventType.TOUCH_START,this.onTouchStart,this),n.on(r.EventType.TOUCH_END,this.onTouchEnd,this),n.on(r.EventType.TOUCH_MOVE,this.onTouchMove,this)},o.ConverPosToIndex=function(e){var t=B.findObjByPath(this.game_obj,"MapGridNode").getComponent(c).convertToNodeSpaceAR(new _(e.x,e.y,0)),i=B.GetIndexByTouchPos(t,this.m_blockSize,this.m_mapSize);return new f(i.x,i.y)},o._onClickPauseBtn=function(){console.log("_onClickPauseBtn ... "),v.getInstance().emit("onPauseGame")},o._isTouchCircle=function(e,t,i){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(i/2,2)},o.onTouchStart=function(e){if(!this.m_touchLock){var t=e.getUILocation(),i=this.m_CurrentBlockCenterNode.position,o=this.m_CurrentBlockNode.getComponent(c).convertToNodeSpaceAR(new _(t.x,t.y,0));this.is_touch_circle=this._isTouchCircle(o,i,C.GameMergeDice.CurrentBlockTouchRadius),this.is_can_move_current_block=!1}},o._getCurrentBlockMinY=function(){for(var e=this.logic.current_block_height,t=this.logic.current_block_width,i=0,o=0;o<e;o++)for(var n=0;n<t;n++){var r=new f(n,o),a=this._findItem(this.m_CurrentBlock,r);i=Math.min(i,a.position.y)}return i},o._updateCurrentBlockPos=function(e){var t=this.m_CurrentBlockNode.getComponent(c).convertToNodeSpaceAR(new _(e.x,e.y,0)),i=this._getCurrentBlockMinY(),o=t.x+C.GameMergeDice.CurrentBlockDelta.x,n=t.y+C.GameMergeDice.CurrentBlockDelta.y-i;this.m_CurrentBlock.position=new _(o,n,0)},o._updatePreviewCurrentBlock=function(e){for(var t=this._findItem(this.m_CurrentBlock,{x:0,y:0}).position,i=this._getCurrentBlockMinY(),o=this.ConverPosToIndex(new f(e.x+C.GameMergeDice.CurrentBlockDelta.x+t.x,e.y+C.GameMergeDice.CurrentBlockDelta.y+t.y-i)),n=0;n<this.m_mapSize.height;++n)for(var r=0;r<this.m_mapSize.width;++r){var a=new f(r,n),c=this.m_GridNumNode.getChildByName("Grid_"+a.y+"_"+a.x);if(null!=c)B.findObjByPath(c,"PreviewBG").active&&(c.active=!1)}var s=this.logic.OnCheckCurrentBlockCanRelease(o);if(0!==s.length)for(var h=0;h<s.length;h++){var l=s[h];this._onPrviewItem(l.index)}},o._onReleaseCurrentBlock=function(e){for(var t=this._findItem(this.m_CurrentBlock,{x:0,y:0}).position,i=this._getCurrentBlockMinY(),o=this.ConverPosToIndex(new f(e.x+C.GameMergeDice.CurrentBlockDelta.x+t.x,e.y+C.GameMergeDice.CurrentBlockDelta.y+t.y-i)),n=this.logic.OnReleaseCurrentBlock(o),r=0;r<n.length;r++){var a=n[r];this._onShowItem(a.index)}return n},o._onCheckMerge=function(e){var t=this,i=this.logic.onCheckMerge(e),o=i.merge_index,n=i.merge_array;if(0!==n.length){for(var r=function(){var e=n[a],i=t._findItem(t.m_GridNumNode,e),r=C.GameMergeDice.merge_times,c=t;if(f.strictEquals(o,e)){new g(i).delay(C.GameMergeDice.merge_delay_times+r/2).call((function(){i.getComponent(m).play("MergeDice"),i.setSiblingIndex(-1),c._updateItem(i,e)})).start()}else{var s=B.GetMapPosByIndex(o,t.m_blockSize,t.m_mapSize);new g(i).delay(C.GameMergeDice.merge_delay_times).to(r,{position:s}).call((function(){i.active=!1;var t=B.GetMapPosByIndex(e,c.m_blockSize,c.m_mapSize);i.position=t})).start()}},a=0;a<n.length;a++)r();var c=this;this.getComponent(u).scheduleOnce((function(){c._onCheckMerge(e)}),C.GameMergeDice.merge_times+2*C.GameMergeDice.merge_delay_times)}else{this._onCreateCurrentBlock();var s=this;this.getComponent(u).scheduleOnce((function(){s.m_touchLock=!1,s._onChechGameOver()}),.2)}},o._onCreateCurrentBlock=function(){this.logic.onCreateCurrentBlock(),this.m_CurrentBlock.active=!0,this._createNewCurrentBlock()},o._onChechGameOver=function(){var e=this.logic.onCheckGameOver();console.log("_onChechGameOver ====",e),e&&v.getInstance().emit("onGameOver")},o._rotateCurrentBlock=function(){var e=this.logic.RotateCurrentBlock(),t=this.logic.current_block_height,i=this.logic.current_block_width;function o(e,t){var i=t.find((function(t){return t.old_index.x===e.x&&t.old_index.y===e.y}));return i?i.new_index:null}for(var n=new Array,r=0;r<t;r++)for(var a=0;a<i;a++){var c={x:a,y:r},s=o(c,e),h=this._findItem(this.m_CurrentBlock,s),l=this._getCurrentBlockPos(c);n.push({item:h,cur_index:c}),new g(h).to(C.GameMergeDice.current_block_rotate_times,{position:l}).start()}for(var m=0;m<n.length;m++)n[m].item.name="Grid_"+n[m].cur_index.y+"_"+n[m].cur_index.x},o.onTouchMove=function(e){if(!this.m_touchLock&&this.is_touch_circle){var t=e.getUILocation(),i=this.m_CurrentBlockCenterNode.position,o=this.m_CurrentBlockNode.getComponent(c).convertToNodeSpaceAR(new _(t.x,t.y,0));this._isTouchCircle(o,i,C.GameMergeDice.CurrentBlockTouchRadius)||(this.is_can_move_current_block=!0),this.is_can_move_current_block&&(this._updateCurrentBlockPos(t),this._updatePreviewCurrentBlock(t))}},o.onTouchEnd=function(e){if(!this.m_touchLock&&this.is_touch_circle){var t=e.getUILocation(),i=this.m_CurrentBlockCenterNode.position,o=this.m_CurrentBlockNode.getComponent(c).convertToNodeSpaceAR(new _(t.x,t.y,0)),n=this._isTouchCircle(o,i,C.GameMergeDice.CurrentBlockTouchRadius);if(this.is_can_move_current_block||!n){var r=this._onReleaseCurrentBlock(t);if(0!==r.length){this.m_CurrentBlock.active=!1;var a=this.m_CurrentBlockCenterNode.position;this.m_CurrentBlock.position=a,this.m_touchLock=!0,this._onCheckMerge(r)}else{var s=new g(this.m_CurrentBlock),h=this.m_CurrentBlockCenterNode.position;s.to(C.GameMergeDice.current_block_return_times,{position:h}).start()}}else this._rotateCurrentBlock()}},o._findUnactiveNode=function(e){return B.findObjByPath(e,"UnactiveNode")},o._mergeInOnePiece=function(e,t){for(var i=this,o=0,n=this,r=function(){var r=t[a].cur_index,c=t[a].parent_index,s=i._findItem(i.m_GridNumNode,r),h=i._findItem(i.m_GridBGNode,r),l=B.GetMapPosByIndex(c,i.m_blockSize,i.m_mapSize),m=t[a].order;o=Math.max(o,m);var d=new g(s),_=new g(h);i._unactiveOneGridConnect(r),e.x==r.x&&e.y==r.y?(d.delay(C.GameMergeDice.merge_times*m).call((function(){n._updateItem(s,r)})).start(),_.delay(C.GameMergeDice.merge_times*m).call((function(){n._updateBG(h,r)})).start()):(d.delay(C.GameMergeDice.merge_times*m).to(C.GameMergeDice.merge_times,{position:l}).call((function(){s.parent=n._findUnactiveNode(s.parent)})).start(),_.delay(C.GameMergeDice.merge_times*m).to(C.GameMergeDice.merge_times,{position:l}).call((function(){h.parent=n._findUnactiveNode(h.parent)})).start())},a=0;a<t.length;a++)r();this.getComponent(u).scheduleOnce((function(){n._createNewGrid()}),C.GameMergeDice.merge_times*(o+1))},o._createNewGrid=function(){console.log("_createNewGrid");var e=this.logic.onCreateNewGrid();console.log("_createNewGrid == ",e);for(var t=e.MoveArray.length,i=new Array,o=new Array,n=0;n<t;++n){var r=e.MoveArray[n].old_index,a=e.MoveArray[n].new_index,c=B.GetMapPosByIndex(a,this.m_blockSize,this.m_mapSize),s=this._findItem(this.m_GridNumNode,r),h=this._findItem(this.m_GridBGNode,r),l=C.GameMergeDice.fall_times*(a.y-r.y);this._unactiveOneGridConnect(r);var m=new g(s),d=new g(h);m.to(l,{position:c}).start(),d.to(l,{position:c}).start(),i.push(s),o.push(h)}for(var f=0;f<t;++f){var v=e.MoveArray[f].new_index;i[f].name="Grid_"+v.y+"_"+v.x,o[f].name=i[f].name}var p=e.NewGridArray.length,y=this._findUnactiveNode(this.m_GridNumNode).children,G=this._findUnactiveNode(this.m_GridBGNode).children;console.assert(y.length==p,y.length,p),console.assert(G.length==p,G.length,p);for(var N=0,k=0;k<p;++k){var b=e.NewGridArray[k].index,x=y[0],I=G[0];x.parent=this.m_GridNumNode,I.parent=this.m_GridBGNode,this._unactiveOneGridConnect(b),this._updateItem(x,b),this._updateBG(I,b);var M=B.GetMapPosByIndex({y:0,x:b.x},this.m_blockSize,this.m_mapSize);x.position=new _(M.x,M.y+C.GameMergeDice.BlockSize.height/2,0),I.position=x.position;var P=B.GetMapPosByIndex(b,this.m_blockSize,this.m_mapSize),w=C.GameMergeDice.fall_times*(b.y+1),S=new g(x),O=new g(I);S.delay(C.GameMergeDice.fall_times).to(w,{position:P}).start(),O.delay(C.GameMergeDice.fall_times).to(w,{position:P}).start(),N=Math.max(w+C.GameMergeDice.fall_times,N),y=this._findUnactiveNode(this.m_GridNumNode).children,G=this._findUnactiveNode(this.m_GridBGNode).children}var D=this;this.getComponent(u).scheduleOnce((function(){D._updateConnectInfo(),D.m_touchLock=!1}),N)},i}(u))||y);i._RF.pop()}}}));

System.register("chunks:///_virtual/GDSDK.ts",["cc","./EventMgr.ts","./AudioMgr.ts"],(function(o){var e,n,t,s;return{setters:[function(o){e=o.cclegacy,n=o._decorator},function(o){t=o.EventMgr},function(o){s=o.AudioMgr}],execute:function(){e._RF.push({},"f5a6dDag/RMlqYaFdBTLm2/","GDSDK",void 0);n.ccclass,n.property,o("default",function(){function o(){}var e=o.prototype;return e.init=function(o,e){var n,c,i,a,d;console.log("GDsdk init"),window.GD_OPTIONS={gameId:"",loader:{enabled:!0},onEvent:function(o){switch(o.name){case"SDK_READY":gdsdk.openConsole(),console.log("SDK_READY ------------");break;case"SDK_GAME_START":console.log("SDK_GAME_START ------------"),s.getInstance().Resume();break;case"SDK_GAME_PAUSE":console.log("SDK_GAME_PAUSE ------------"),s.getInstance().Pause();break;case"SDK_GDPR_TRACKING":console.log("SDK_GDPR_TRACKING ------------");break;case"SDK_GDPR_TARGETING":console.log("SDK_GDPR_TARGETING ------------");break;case"ALL_ADS_COMPLETED":console.log("ALL_ADS_COMPLETED ------------");break;case"COMPLETE":console.log("COMPLETE ------------"),t.getInstance().emit("onAddOneProp");break;case"CONTENT_RESUME_REQUESTED":console.log("CONTENT_RESUME_REQUESTED ------------");break;case"SDK_REWARDED_WATCH_COMPLETE":console.log("SDK_REWARDED_WATCH_COMPLETE ------------")}}},n=document,c="script",i="gamedistribution-jssdk",d=n.getElementsByTagName(c)[0],n.getElementById(i)||((a=n.createElement(c)).id=i,a.src="https://html5.api.gamedistribution.com/main.min.js",d.parentNode.insertBefore(a,d))},e.login=function(o,e){console.log("GDsdk login")},e.logout=function(){console.log("GDsdk logout")},e.exit=function(){console.log("GDsdk exit")},e.switchLogin=function(){},e.report=function(){},e.pay=function(){},e.createRewardAd=function(){},e.playRewardAd=function(o,e){console.log("GDsdk showInterstitialAd"),console.log("GDsdk playRewardAd"),"undefined"!==gdsdk&&"undefined"!==gdsdk.showAd&&gdsdk.showAd("rewarded").then((function(o){})).catch((function(o){}))},e.showBannerAd=function(o){console.log("GDsdk showInterstitialAd")},e.showInterstitialAd=function(){console.log("GDsdk showInterstitialAd")},e.showCustomAd=function(o,e,n){},o}());e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizationMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResMgr.ts","./ConfigData.ts"],(function(n){var e,t,a,r,s,o,u,i,c;return{setters:[function(n){e=n.createForOfIteratorHelperLoose,t=n.asyncToGenerator,a=n.regeneratorRuntime},function(n){r=n.cclegacy,s=n._decorator,o=n.resources,u=n.JsonAsset},function(n){i=n.default},function(n){c=n.gConfigData}],execute:function(){var g,f;r._RF.push({},"2fcfcrCxThIPIwSuDrfvg0O","LocalizationMgr",void 0);var l=s.ccclass;s.property,n("LocalizationMgr",l("LocalizationMgr")(((f=function(){function n(){this.currentLanguage=void 0,this.languages=void 0,this.languages=[],this.currentLanguage=c.LANGUAGE}n.getInstance=function(){return this.instance||(this.instance=new n,this.instance.init()),this.instance};var r=n.prototype;return r.init=function(){var n=t(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this._loadLanguages();case 1:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),r._loadLanguages=function(){for(var n=["en","zh"],e=["英语(English)","中文(Chinese)"],t=0;t<n.length;t++){var a=n[t],r=i.getInstance().getAsset("Languages",a),s={code:a,desc:e[t],texts:{}};for(var o in r.json)if(r.json.hasOwnProperty(o)){var u=r.json[o];s.texts[o]=u}this.languages.push(s)}},r.loadLanguages=function(){var n=t(a().mark((function n(){var e,r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=["en","zh","fr","es","de","ja","ko","ru","ar","pt"],r=["英语(English)","中文(Chinese)","法语(French)","西班牙语(Spanish)","德语(German)","日语(Japanese)","韩语(Korean)","俄语(Russian)","阿拉伯语(Arabic)","葡萄牙语(Portuguese)"],n.prev=2,s=e.map(t(a().mark((function n(e,t){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,a){o.load("Languages/"+e,u,(function(s,o){s?a(s):n({code:e,desc:r[t],texts:o.json,font:o.json.font,audio:o.json.audio})}))})));case 1:case"end":return n.stop()}}),n)})))),n.next=6,Promise.all(s);case 6:this.languages=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),console.error("Failed to load language resources:",n.t0);case 12:case"end":return n.stop()}}),n,this,[[2,9]])})));return function(){return n.apply(this,arguments)}}(),r.setLanguage=function(n){this.languages.find((function(e){return e.code===n}))?this.currentLanguage=n:console.warn("Language '"+n+"'is not supported.")},r.getLocalizedstring=function(n){var e=this,t=this.languages.find((function(n){return n.code===e.currentLanguage}));return t&&t.texts[n]?t.texts[n]:(console.warn("Translation for key '"+n+"' not found in current language."),n)},r.getCurLanguageDesc=function(){for(var n,t=e(this.languages);!(n=t()).done;){var a=n.value;if(a.code==this.currentLanguage)return console.log(a.desc),a.desc}return""},r.getCurLanguages=function(){return this.languages},r.setLanguageByIndex=function(n){this.setLanguage(this.languages[n].code)},n}()).instance=void 0,g=f))||g);r._RF.pop()}}}));

System.register("chunks:///_virtual/Log.ts",["cc"],(function(t){var e,c;return{setters:[function(t){e=t.cclegacy,c=t._decorator}],execute:function(){var o;e._RF.push({},"09527+/ZDNChpLc5N6l0Ltz","Log",void 0);var r=c.ccclass;c.property,t("default",r("Log")(o=function(t){this.logLevel=void 0,this.logLevel=t})||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/LogicMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Game2248Logic.ts"],(function(n){var t,e,c,i,o;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,c=n._decorator,i=n.Component},function(n){o=n.Game2248Logic}],execute:function(){var r,l;e._RF.push({},"5b280xl9y1MLbwxhw3dHkQC","LogicMgr",void 0);var s=c.ccclass;c.property,n("LogicMgr",s("LogicMgr")(((l=function(n){function e(){for(var t,e=arguments.length,c=new Array(e),i=0;i<e;i++)c[i]=arguments[i];return(t=n.call.apply(n,[this].concat(c))||this).game2248_logic=null,t.gameInOnePiece_logic=null,t.eventList=null,t}t(e,n),e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance};var c=e.prototype;return c.onLoad=function(){null===e.instance?e.instance=this:this.destroy()},c.init=function(){console.log("LogicMgr Init..."),this.game2248_logic=new o},e}(i)).instance=null,r=l))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./GameBase.ts","./Log.ts","./SaveData.ts","./YolkStudio.ts","./Calculator.ts","./CommonGameOverPanel.ts","./CommonGamePausePanel.ts","./CommonGameRewardPanel.ts","./CommonGameTeachingPanel.ts","./ConfigData.ts","./GameLaunch.ts","./GameApp.ts","./Game2248.ts","./Game2248Logic.ts","./Game2248Panel.ts","./GameClickMeAddOne.ts","./GameInOnePiece.ts","./GameInOnePieceData.ts","./GameInOnePieceLogic.ts","./GameInOnePieceLoadingPanel.ts","./GameInOnePiecePanel.ts","./GameMergeDice.ts","./GameMergeDiceLogic.ts","./GameMergeDicePanel.ts","./AudioMgr.ts","./BlockMgr.ts","./DataMgr.ts","./EventMgr.ts","./LocalizationMgr.ts","./LogicMgr.ts","./ResMgr.ts","./SDKMgr.ts","./BaseSDK.ts","./GDSDK.ts","./SDKInterface.ts","./WXSDK.ts","./Y8SDK.ts","./MainScenePanel.ts","./UIStaticComp.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MainScenePanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts","./UIStaticComp.ts"],(function(n){var e,t,o,a,c,i,l,r,m,s;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,a=n.EventHandler,c=n.instantiate,i=n.Label,l=n.Button,r=n.Component},function(n){m=n.EventMgr},function(n){s=n.UIStaticComp}],execute:function(){var u;t._RF.push({},"425fbCgzy1IRYDjcrrNzew1","MainScenePanel",void 0);var g=o.ccclass,f=(o.property,[{Name:"清除数据",func:"_onClickGame2048"},{Name:"2248",func:"_onClickGame2248"},{Name:"合成一片",func:"_onClickGameInOnePiece"},{Name:"点我加1",func:"_onClickGame2248"},{Name:"骰子合并",func:"_onClickGameMergeDice"},{Name:"水排序",func:"_onClickGame2248"},{Name:"数字下落",func:"_onClickGame2248"}]);n("MainScenePanel",g("MainScenePanel")(u=function(n){function t(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))||this).game_obj=null,e}e(t,n);var o=t.prototype;return o.Init=function(n){this.game_obj=n,this._initBtnData()},o._registerTypeEvent=function(n,e,t){var o=new a;return o.target=this.game_obj,o.component=e,o.handler=n,o.customEventData=""+t,o},o._initBtnData=function(){var n=s.findObjByPath(this.game_obj,"GameList/view/content"),e=s.findObjByPath(n,"ButtonDemo");e.removeFromParent();for(var t=0;t<f.length;++t){var o=c(e);s.findObjByPath(o,"Label").getComponent(i).string=f[t].Name;var a=this._registerTypeEvent(f[t].func,"MainScenePanel",t);o.getComponent(l).clickEvents.pop(),o.getComponent(l).clickEvents.push(a),n.addChild(o)}},o._onClickGame2048=function(){console.log("_onClickGame2048"),localStorage.clear()},o._onClickGame2248=function(){console.log("_onClickGame2248"),m.getInstance().emit("onStartGame2248")},o._onClickGameInOnePiece=function(){console.log("_onClickGameInOnePiece"),m.getInstance().emit("onStartGameInOnePiece")},o._onClickGameMergeDice=function(){console.log("_onClickGameInOnePiece"),m.getInstance().emit("onStartGameMergeDice")},o._onSelectBtn=function(){},o._onClickStartGame=function(){console.log("_onClickStartGame ... "),m.getInstance().emit("onGameStart")},o._onClickGalleryBtn=function(){console.log("_onClickGalleryBtn ... "),m.getInstance().emit("onOpenGalleryPanel")},t}(r))||u);t._RF.pop()}}}));

System.register("chunks:///_virtual/ResMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,s,t,o;return{setters:[function(n){e=n.inheritsLoose},function(n){s=n.cclegacy,t=n.assetManager,o=n.Component}],execute:function(){s._RF.push({},"0b9ec7rkqtIWoJAw+y6YSrN","ResMgr",void 0),n("default",function(n){function s(){for(var e,s=arguments.length,t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];return(e=n.call.apply(n,[this].concat(t))||this).abBunds={},e.total=0,e.now=0,e.progressFunc=null,e.endFunc=null,e.nowAb=0,e.totalAb=0,e}e(s,n);var o=s.prototype;return o.init=function(){console.log("ResMgr Init...")},s.getInstance=function(){return null==s.instance&&(s.instance=new s),s.instance},o.loadAssetsBundle=function(n,e){var s=this;console.log("loadAssetsBundle",n),t.loadBundle(n,(function(t,o){null!==t?(console.log("[ResMgr]:Load AssetsBundle Error: "+n),s.abBunds[n]=null):(console.log("[ResMgr]:Load AssetsBundle Success: "+n),s.abBunds[n]=o),e&&e()}))},o.onLoad=function(){null===s.instance?s.instance=this:this.destroy()},o.loadRes=function(n,e,s){var t=this;n.load(e,s,(function(n,s){t.now++,n&&console.log("load Res "+e+" error: "+n),t.progressFunc&&t.progressFunc(t.now,t.total),t.now>=t.total&&null!==t.endFunc&&t.endFunc()}))},o.getAsset=function(n,e){var s=t.getBundle(n);return null===s?(console.log("[error]: "+n+" AssetsBundle not loaded !!!"),null):s.get(e)},o.releaseResPackage=function(n){for(var e in n)for(var s=n[e].urls,o=0;o<s.length;o++){var l=t.getBundle(e);null!==l?t.releaseAsset(l.get(s[o])):console.log("[error]: "+e+" AssetsBundle not loaded !!!")}},o.loadAssetsInAssetsBundle=function(n){for(var e in n)for(var s=n[e].urls,t=n[e].assetType,o=0;o<s.length;o++)this.loadRes(this.abBunds[e],s[o],t)},o.preloadResPackage=function(n,e,s){var t=this;for(var o in console.log("preloadResPackage -- ",n),this.total=0,this.now=0,this.totalAb=0,this.nowAb=0,this.progressFunc=e,this.endFunc=s,n)this.totalAb++,this.total+=n[o].urls.length;for(var o in n)this.loadAssetsBundle(o,(function(){t.nowAb++,t.nowAb===t.totalAb&&t.loadAssetsInAssetsBundle(n)}))},s}(o)).instance=null,s._RF.pop()}}}));

System.register("chunks:///_virtual/SaveData.ts",["cc"],(function(t){var e,a;return{setters:[function(t){e=t.cclegacy,a=t._decorator}],execute:function(){var n;e._RF.push({},"598debXFgJDL5YcDLRiv85Z","SaveData",void 0);var c=a.ccclass;a.property,t("SaveData",c("SaveData")(n=function(){function t(){}return t.OnSaveData=function(t,e,a){a instanceof Number?localStorage.setItem(t+"_"+e,String(a)):localStorage.setItem(t+"_"+e,JSON.stringify(a))},t.OnLoadData=function(t,e){return localStorage.getItem(t+"_"+e)},t.OnRemoveData=function(t,e){localStorage.removeItem(t+"_"+e)},t}())||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/SDKInterface.ts",["cc"],(function(){var c,e;return{setters:[function(t){c=t.cclegacy,e=t._decorator}],execute:function(){c._RF.push({},"3fa1atlAMBHibPSxUN+dnRV","SDKInterface",void 0);e.ccclass,e.property;c._RF.pop()}}}));

System.register("chunks:///_virtual/SDKMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GDSDK.ts","./BaseSDK.ts","./ConfigData.ts","./WXSDK.ts","./Y8SDK.ts"],(function(n){var t,e,i,s,r,a,o,u,c,l;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,s=n.Component},function(n){r=n.default},function(n){a=n.default},function(n){o=n.gConfigData,u=n.PLATFORM_TAG},function(n){c=n.default},function(n){l=n.Y8SDK}],execute:function(){var d,h;e._RF.push({},"9b603WwSddMipcWJYJY++nl","SDKMgr",void 0);var g=i.ccclass;i.property,n("SDKMgr",g("SDKMgr")(((h=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return(t=n.call.apply(n,[this].concat(i))||this).m_gdsdk=null,t}t(e,n);var i=e.prototype;return i.init=function(){console.log("SDKMgr Init..."),o.PLATFORM===u.WECHAT?(this.m_gdsdk=new c,this.registerEvent()):o.PLATFORM===u.GAME_DISTRIBUTION?this.m_gdsdk=new r:o.PLATFORM===u.Y8?this.m_gdsdk=new l:this.m_gdsdk=new a,this.m_gdsdk.init(null,null)},i.getShareData=function(){return{title:"合个大数字",imageUrl:"",query:""}},i.registerEvent=function(){var n=this,t=window.wx;t.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}),t.onShareAppMessage((function(){return n.getShareData()})),t.onShareTimeline((function(){return n.getShareData()}))},i.showRewardAd=function(){this.m_gdsdk.playRewardAd(null,null)},i.showInterstitialAd=function(){this.m_gdsdk.showInterstitialAd()},i.showAd=function(){this.m_gdsdk.showInterstitialAd()},i.showBannerAd=function(n){this.m_gdsdk.showBannerAd(n)},e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e}(s)).instance=null,d=h))||d);e._RF.pop()}}}));

System.register("chunks:///_virtual/UIStaticComp.ts",["cc"],(function(t){var n,e,r,o;return{setters:[function(t){n=t.cclegacy,e=t._decorator,r=t.Vec3,o=t.EventHandler}],execute:function(){t("ConsoleError",i),n._RF.push({},"b519fx+ywVFH43yqUnwfIgi","UIStaticComp",void 0);e.ccclass,e.property;function i(t){if(0==t){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];console.error(e)}}t("UIStaticComp",function(){function t(){}return t.findObjByPath=function(t,n){for(var e=n.split("/"),r=t,o=0;o<e.length;++o)i(null!=(r=r.getChildByName(e[o])),t,n);return i(null!=r,n),r},t.createChildPanel=function(t,n){return null},t.GetMapPosByIndex=function(t,n,e){var o=n.width,i=n.width,c=e.width,u=e.height,a=o*(c-1)/2,h=i*(u+1)/2,l=t.x*o-a,f=(u-t.y)*i-h;return new r(l,f,0)},t.GetIndexByTouchPos=function(t,n,e){var r=n.width,o=n.width,i=r*e.width/2+t.x,c=o*e.height/2+t.y;return{x:i<0?-1:i>r*e.width?-2:Math.floor(i/r),y:c<0?-2:c>o*e.height?-1:e.height-1-Math.floor(c/o)}},t.RegisterOneEvent=function(t,n,e,r){void 0===r&&(r="");var i=new o;return i.target=n,i.component=t,i.handler=e,i.customEventData=""+r,i},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/WXSDK.ts",["cc","./EventMgr.ts","./AudioMgr.ts"],(function(t){var n,i,o,e;return{setters:[function(t){n=t.cclegacy,i=t._decorator},function(t){o=t.EventMgr},function(t){e=t.AudioMgr}],execute:function(){n._RF.push({},"c3147NoIZ9GGqhLQ/u2gY0M","WXSDK",void 0);i.ccclass,i.property;var s=window.wx;t("default",function(){function t(){this.m_video_ad=null,this.m_banner_ad=null,this.m_interstitial_ad=null,this.b_interstitial_ad=!1}var n=t.prototype;return n.init=function(t,n){s.createInterstitialAd&&(this.m_interstitial_ad=s.createInterstitialAd({adUnitId:""})),this.m_video_ad=s.createRewardedVideoAd({adUnitId:""}),this.m_video_ad.onLoad((function(){console.log("激励视频 广告加载成功")})),this.m_video_ad.onError((function(t){console.log(t)})),this.m_video_ad.onClose((function(t){t&&t.isEnded||void 0===t?(console.log("正常播放结束，可以下发游戏奖励"),o.getInstance().emit("onAddOneProp")):console.log("播放中途退出，不下发游戏奖励"),e.getInstance().Resume()}))},n.login=function(t,n){console.log("WXSDK login")},n.logout=function(){console.log("WXSDK logout")},n.exit=function(){console.log("WXSDK exit")},n.switchLogin=function(){},n.report=function(){},n.pay=function(){},n.createRewardAd=function(){},n.playRewardAd=function(t,n){this.m_video_ad.show().then((function(){return console.log("激励视频 广告显示")}))},n.showBannerAd=function(t){if(t)if(null==this.m_banner_ad){var n=s.getSystemInfoSync(),i=n.screenWidth,o=n.screenHeight,e=i-80,r=s.createBannerAd({adUnitId:"",adIntervals:30,style:{left:30,top:o-120,width:e}});r.show();var a=this;r.onError((function(t){a.m_banner_ad=null,console.error(t.errMsg)})),this.m_banner_ad=r}else this.m_banner_ad.show();else this.m_banner_ad.hide()},n.showInterstitialAd=function(){console.log("WXSDK showInterstitialAd"),this.b_interstitial_ad&&(this.m_interstitial_ad&&this.m_interstitial_ad.show().catch((function(t){console.error("插屏广告显示失败",t)})),this.b_interstitial_ad=!this.b_interstitial_ad)},n.showCustomAd=function(t,n,i){},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/Y8SDK.ts",["cc"],(function(n){var o,t;return{setters:[function(n){o=n.cclegacy,t=n._decorator}],execute:function(){o._RF.push({},"551e6pfHx1CFoH34EC4ELvd","Y8SDK",void 0);t.ccclass,t.property,n("Y8SDK",function(){function n(){}var o=n.prototype;return o.init=function(n,o){console.log("Y8Sdk init"),ID.ads.init(gameId)},o.login=function(n,o){console.log("Y8Sdk login")},o.logout=function(){console.log("Y8Sdk logout")},o.exit=function(){console.log("Y8Sdk exit")},o.switchLogin=function(){},o.report=function(){},o.pay=function(){},o.createRewardAd=function(){},o.playRewardAd=function(n,o){},o.showBannerAd=function(n){EventMgr.getInstance().emit("onAddOneProp")},o.showInterstitialAd=function(){},o.showCustomAd=function(n,o,t){},n}());o._RF.pop()}}}));

System.register("chunks:///_virtual/YolkStudio.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventMgr.ts"],(function(n){var t,e,o,i,a,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,o=n._decorator,i=n.Animation,a=n.Component},function(n){s=n.EventMgr}],execute:function(){var r;e._RF.push({},"88005qJZjNM3biywi/ShN5o","YolkStudio",void 0);var l=o.ccclass;o.property,n("YolkStudio",l("YolkStudio")(r=function(n){function e(){for(var t,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return(t=n.call.apply(n,[this].concat(o))||this).game_obj=null,t.b_has_loading_panel=!1,t.b_has_play_yolk_animate=!1,t}t(e,n);var o=e.prototype;return o.Init=function(n){this.game_obj=n,this._playStartAnimation(),this._registerEvent()},o.onDestroy=function(){this._unRegisterEvent()},o._registerEvent=function(){s.getInstance().on("onLoadingPanelPrepare",this._onLoadingPanelPrepare,this)},o._unRegisterEvent=function(){s.getInstance().off("onLoadingPanelPrepare",this._onLoadingPanelPrepare,this)},o._onLoadingPanelPrepare=function(){this.b_has_loading_panel=!0,this._checkCanRemoveSelf()},o._onFinishPlayYolkAnimation=function(){this.b_has_play_yolk_animate=!0,this._checkCanRemoveSelf()},o._playStartAnimation=function(){this.game_obj.getComponent(i).play("YolkStudioStartAnimation");var n=this;this.getComponent(a).scheduleOnce((function(){n._onFinishPlayYolkAnimation()}),1)},o._playEndAnimation=function(){this.game_obj.getComponent(i).play("YolkStudioEndAnimation")},o._removeSelf=function(){var n=this;this.getComponent(a).scheduleOnce((function(){n.onDestroy(),n.game_obj.removeFromParent()}),1)},o._checkCanRemoveSelf=function(){this.b_has_loading_panel&&this.b_has_play_yolk_animate&&(this._playEndAnimation(),this._removeSelf(),s.getInstance().emit("onYolkStudioFinish"))},e}(a))||r);e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});